var lm=Object.defineProperty;var _a=o=>{throw TypeError(o)};var um=(o,l,f)=>l in o?lm(o,l,{enumerable:!0,configurable:!0,writable:!0,value:f}):o[l]=f;var Oe=(o,l,f)=>um(o,typeof l!="symbol"?l+"":l,f),ga=(o,l,f)=>l.has(o)||_a("Cannot "+f);var on=(o,l,f)=>(ga(o,l,"read from private field"),f?f.call(o):l.get(o)),sn=(o,l,f)=>l.has(o)?_a("Cannot add the same private member more than once"):l instanceof WeakSet?l.add(o):l.set(o,f),ln=(o,l,f,u)=>(ga(o,l,"write to private field"),u?u.call(o,f):l.set(o,f),f);(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))u(_);new MutationObserver(_=>{for(const g of _)if(g.type==="childList")for(const b of g.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&u(b)}).observe(document,{childList:!0,subtree:!0});function f(_){const g={};return _.integrity&&(g.integrity=_.integrity),_.referrerPolicy&&(g.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?g.credentials="include":_.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function u(_){if(_.ep)return;_.ep=!0;const g=f(_);fetch(_.href,g)}})();const fn=!1;var hn=Array.isArray,cm=Array.prototype.indexOf,pn=Array.from,fm=Object.defineProperty,Ur=Object.getOwnPropertyDescriptor,dm=Object.getOwnPropertyDescriptors,vm=Object.prototype,mm=Array.prototype,Ra=Object.getPrototypeOf;function _m(o){return typeof o=="function"}const Gr=()=>{};function gm(o){for(var l=0;l<o.length;l++)o[l]()}const Be=2,Ba=4,At=8,Dt=16,er=32,Vr=64,Et=128,_r=256,wt=512,De=1024,rr=2048,Fr=4096,qe=8192,Tr=16384,Ma=32768,Ft=65536,hm=1<<19,Oa=1<<20,ht=Symbol("$state");function Ia(o){return o===this.v}function pm(o,l){return o!=o?l==l:o!==l||o!==null&&typeof o=="object"||typeof o=="function"}function Ga(o){return!pm(o,this.v)}function ym(o){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Em(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function wm(o){throw new Error("https://svelte.dev/e/effect_orphan")}function bm(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function km(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function xm(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Cm(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function Sm(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Am=!1;const Dm=1,Fm=2,Tm=16,Lm=4,Pm=1,Rm=2,Ce=Symbol();function Re(o,l){var f={f:0,v:o,reactions:null,equals:Ia,rv:0,wv:0};return f}function vr(o){return Mm(Re(o))}function Bm(o,l=!1){const f=Re(o);return l||(f.equals=Ga),f}function Mm(o){return ae!==null&&!He&&ae.f&Be&&(je===null?Ym([o]):je.push(o)),o}function ne(o,l){return ae!==null&&!He&&ii()&&ae.f&(Be|Dt)&&(je===null||!je.includes(o))&&Sm(),Na(o,l)}function Na(o,l){return o.equals(l)||(o.v,o.v=l,o.wv=ai(),Ua(o,rr),ie!==null&&ie.f&De&&!(ie.f&(er|Vr))&&($e===null?Qm([o]):$e.push(o))),l}function Ua(o,l){var f=o.reactions;if(f!==null)for(var u=f.length,_=0;_<u;_++){var g=f[_],b=g.f;b&rr||(Ve(g,l),b&(De|_r)&&(b&Be?Ua(g,Fr):Rt(g)))}}let za=!1;function ze(o,l=null,f){if(typeof o!="object"||o===null||ht in o)return o;const u=Ra(o);if(u!==vm&&u!==mm)return o;var _=new Map,g=hn(o),b=Re(0);g&&_.set("length",Re(o.length));var I;return new Proxy(o,{defineProperty(L,w,F){(!("value"in F)||F.configurable===!1||F.enumerable===!1||F.writable===!1)&&km();var k=_.get(w);return k===void 0?(k=Re(F.value),_.set(w,k)):ne(k,ze(F.value,I)),!0},deleteProperty(L,w){var F=_.get(w);if(F===void 0)w in L&&_.set(w,Re(Ce));else{if(g&&typeof w=="string"){var k=_.get("length"),A=Number(w);Number.isInteger(A)&&A<k.v&&ne(k,A)}ne(F,Ce),ha(b)}return!0},get(L,w,F){var G;if(w===ht)return o;var k=_.get(w),A=w in L;if(k===void 0&&(!A||(G=Ur(L,w))!=null&&G.writable)&&(k=Re(ze(A?L[w]:Ce,I)),_.set(w,k)),k!==void 0){var T=U(k);return T===Ce?void 0:T}return Reflect.get(L,w,F)},getOwnPropertyDescriptor(L,w){var F=Reflect.getOwnPropertyDescriptor(L,w);if(F&&"value"in F){var k=_.get(w);k&&(F.value=U(k))}else if(F===void 0){var A=_.get(w),T=A==null?void 0:A.v;if(A!==void 0&&T!==Ce)return{enumerable:!0,configurable:!0,value:T,writable:!0}}return F},has(L,w){var T;if(w===ht)return!0;var F=_.get(w),k=F!==void 0&&F.v!==Ce||Reflect.has(L,w);if(F!==void 0||ie!==null&&(!k||(T=Ur(L,w))!=null&&T.writable)){F===void 0&&(F=Re(k?ze(L[w],I):Ce),_.set(w,F));var A=U(F);if(A===Ce)return!1}return k},set(L,w,F,k){var Q;var A=_.get(w),T=w in L;if(g&&w==="length")for(var G=F;G<A.v;G+=1){var z=_.get(G+"");z!==void 0?ne(z,Ce):G in L&&(z=Re(Ce),_.set(G+"",z))}A===void 0?(!T||(Q=Ur(L,w))!=null&&Q.writable)&&(A=Re(void 0),ne(A,ze(F,I)),_.set(w,A)):(T=A.v!==Ce,ne(A,ze(F,I)));var X=Reflect.getOwnPropertyDescriptor(L,w);if(X!=null&&X.set&&X.set.call(k,F),!T){if(g&&typeof w=="string"){var V=_.get("length"),Y=Number(w);Number.isInteger(Y)&&Y>=V.v&&ne(V,Y+1)}ha(b)}return!0},ownKeys(L){U(b);var w=Reflect.ownKeys(L).filter(A=>{var T=_.get(A);return T===void 0||T.v!==Ce});for(var[F,k]of _)k.v!==Ce&&!(F in L)&&w.push(F);return w},setPrototypeOf(){xm()}})}function ha(o,l=1){ne(o,o.v+l)}var pa,qa,Ha;function Om(){if(pa===void 0){pa=window;var o=Element.prototype,l=Node.prototype;qa=Ur(l,"firstChild").get,Ha=Ur(l,"nextSibling").get,o.__click=void 0,o.__className="",o.__attributes=null,o.__styles=null,o.__e=void 0,Text.prototype.__t=void 0}}function ja(o=""){return document.createTextNode(o)}function zr(o){return qa.call(o)}function Tt(o){return Ha.call(o)}function Ie(o,l){return zr(o)}function ya(o,l){{var f=zr(o);return f instanceof Comment&&f.data===""?Tt(f):f}}function Ee(o,l=1,f=!1){let u=o;for(;l--;)u=Tt(u);return u}function Im(o){o.textContent=""}function bt(o){var l=Be|rr;ie===null?l|=_r:ie.f|=Oa;var f=ae!==null&&ae.f&Be?ae:null;const u={children:null,ctx:Ae,deps:null,equals:Ia,f:l,fn:o,reactions:null,rv:0,v:null,wv:0,parent:f??ie};return f!==null&&(f.children??(f.children=[])).push(u),u}function Gm(o){const l=bt(o);return l.equals=Ga,l}function Xa(o){var l=o.children;if(l!==null){o.children=null;for(var f=0;f<l.length;f+=1){var u=l[f];u.f&Be?yn(u):Je(u)}}}function Nm(o){for(var l=o.parent;l!==null;){if(!(l.f&Be))return l;l=l.parent}return null}function Wa(o){var l,f=ie;We(Nm(o));try{Xa(o),l=si(o)}finally{We(f)}return l}function Va(o){var l=Wa(o),f=(ur||o.f&_r)&&o.deps!==null?Fr:De;Ve(o,f),o.equals(l)||(o.v=l,o.wv=ai())}function yn(o){Xa(o),jr(o,0),Ve(o,Tr),o.v=o.children=o.deps=o.ctx=o.reactions=null}function Um(o){ie===null&&ae===null&&wm(),ae!==null&&ae.f&_r&&Em(),kn&&ym()}function zm(o,l){var f=l.last;f===null?l.last=l.first=o:(f.next=o,o.prev=f,l.last=o)}function Yr(o,l,f,u=!0){var _=(o&Vr)!==0,g=ie,b={ctx:Ae,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:o|rr,first:null,fn:l,last:null,next:null,parent:_?null:g,prev:null,teardown:null,transitions:null,wv:0};if(f){var I=Sr;try{Ea(!0),xn(b),b.f|=Ma}catch(F){throw Je(b),F}finally{Ea(I)}}else l!==null&&Rt(b);var L=f&&b.deps===null&&b.first===null&&b.nodes_start===null&&b.teardown===null&&(b.f&(Oa|Et))===0;if(!L&&!_&&u&&(g!==null&&zm(b,g),ae!==null&&ae.f&Be)){var w=ae;(w.children??(w.children=[])).push(b)}return b}function qm(){return ae===null||He?!1:!ur}function Hm(o){Um();var l=ie!==null&&(ie.f&er)!==0&&Ae!==null&&!Ae.m;if(l){var f=Ae;(f.e??(f.e=[])).push({fn:o,effect:ie,reaction:ae})}else{var u=Qr(o);return u}}function jm(o){const l=Yr(Vr,o,!0);return(f={})=>new Promise(u=>{f.outro?kt(l,()=>{Je(l),u(void 0)}):(Je(l),u(void 0))})}function Qr(o){return Yr(Ba,o,!1)}function Ya(o){return Yr(At,o,!0)}function En(o,l=[],f=bt){const u=l.map(f);return Lt(()=>o(...u.map(U)))}function Lt(o,l=0){return Yr(At|Dt|l,o,!0)}function Dr(o,l=!0){return Yr(At|er,o,!0,l)}function Qa(o){var l=o.teardown;if(l!==null){const f=kn,u=ae;wa(!0),Xe(null);try{l.call(null)}finally{wa(f),Xe(u)}}}function Ka(o){var l=o.deriveds;if(l!==null){o.deriveds=null;for(var f=0;f<l.length;f+=1)yn(l[f])}}function $a(o,l=!1){var f=o.first;for(o.first=o.last=null;f!==null;){var u=f.next;Je(f,l),f=u}}function Xm(o){for(var l=o.first;l!==null;){var f=l.next;l.f&er||Je(l),l=f}}function Je(o,l=!0){var f=!1;if((l||o.f&hm)&&o.nodes_start!==null){for(var u=o.nodes_start,_=o.nodes_end;u!==null;){var g=u===_?null:Tt(u);u.remove(),u=g}f=!0}$a(o,l&&!f),Ka(o),jr(o,0),Ve(o,Tr);var b=o.transitions;if(b!==null)for(const L of b)L.stop();Qa(o);var I=o.parent;I!==null&&I.first!==null&&Za(o),o.next=o.prev=o.teardown=o.ctx=o.deps=o.fn=o.nodes_start=o.nodes_end=null}function Za(o){var l=o.parent,f=o.prev,u=o.next;f!==null&&(f.next=u),u!==null&&(u.prev=f),l!==null&&(l.first===o&&(l.first=u),l.last===o&&(l.last=f))}function kt(o,l){var f=[];wn(o,f,!0),Ja(f,()=>{Je(o),l&&l()})}function Ja(o,l){var f=o.length;if(f>0){var u=()=>--f||l();for(var _ of o)_.out(u)}else l()}function wn(o,l,f){if(!(o.f&qe)){if(o.f^=qe,o.transitions!==null)for(const b of o.transitions)(b.is_global||f)&&l.push(b);for(var u=o.first;u!==null;){var _=u.next,g=(u.f&Ft)!==0||(u.f&er)!==0;wn(u,l,g?f:!1),u=_}}}function xt(o){ei(o,!0)}function ei(o,l){if(o.f&qe){o.f^=qe,o.f&De||(o.f^=De),Kr(o)&&(Ve(o,rr),Rt(o));for(var f=o.first;f!==null;){var u=f.next,_=(f.f&Ft)!==0||(f.f&er)!==0;ei(f,_?l:!1),f=u}if(o.transitions!==null)for(const g of o.transitions)(g.is_global||l)&&g.in()}}let Ct=!1,dn=[];function ri(){Ct=!1;const o=dn.slice();dn=[],gm(o)}function bn(o){Ct||(Ct=!0,queueMicrotask(ri)),dn.push(o)}function Wm(){Ct&&ri()}const ti=0,Vm=1;let pt=!1,yt=ti,qr=!1,Hr=null,Sr=!1,kn=!1;function Ea(o){Sr=o}function wa(o){kn=o}let mr=[],Ar=0;let ae=null,He=!1;function Xe(o){ae=o}let ie=null;function We(o){ie=o}let je=null;function Ym(o){je=o}let Se=null,Pe=0,$e=null;function Qm(o){$e=o}let ni=1,St=0,ur=!1,Ae=null;function ai(){return++ni}function ii(){return!0}function Kr(o){var w;var l=o.f;if(l&rr)return!0;if(l&Fr){var f=o.deps,u=(l&_r)!==0;if(f!==null){var _,g,b=(l&wt)!==0,I=u&&ie!==null&&!ur,L=f.length;if(b||I){for(_=0;_<L;_++)g=f[_],(b||!((w=g==null?void 0:g.reactions)!=null&&w.includes(o)))&&(g.reactions??(g.reactions=[])).push(o);b&&(o.f^=wt)}for(_=0;_<L;_++)if(g=f[_],Kr(g)&&Va(g),g.wv>o.wv)return!0}(!u||ie!==null&&!ur)&&Ve(o,De)}return!1}function Km(o,l){for(var f=l;f!==null;){if(f.f&Et)try{f.fn(o);return}catch{f.f^=Et}f=f.parent}throw pt=!1,o}function $m(o){return(o.f&Tr)===0&&(o.parent===null||(o.parent.f&Et)===0)}function Pt(o,l,f,u){if(pt){if(f===null&&(pt=!1),$m(l))throw o;return}f!==null&&(pt=!0);{Km(o,l);return}}function oi(o,l,f=0){var u=o.reactions;if(u!==null)for(var _=0;_<u.length;_++){var g=u[_];g.f&Be?oi(g,l,f+1):l===g&&(f===0?Ve(g,rr):g.f&De&&Ve(g,Fr),Rt(g))}}function si(o){var T;var l=Se,f=Pe,u=$e,_=ae,g=ur,b=je,I=Ae,L=He,w=o.f;Se=null,Pe=0,$e=null,ae=w&(er|Vr)?null:o,ur=!Sr&&(w&_r)!==0,je=null,Ae=o.ctx,He=!1,St++;try{var F=(0,o.fn)(),k=o.deps;if(Se!==null){var A;if(jr(o,Pe),k!==null&&Pe>0)for(k.length=Pe+Se.length,A=0;A<Se.length;A++)k[Pe+A]=Se[A];else o.deps=k=Se;if(!ur)for(A=Pe;A<k.length;A++)((T=k[A]).reactions??(T.reactions=[])).push(o)}else k!==null&&Pe<k.length&&(jr(o,Pe),k.length=Pe);if(ii()&&$e!==null&&!(o.f&(Be|Fr|rr)))for(A=0;A<$e.length;A++)oi($e[A],o);return _!==null&&St++,F}finally{Se=l,Pe=f,$e=u,ae=_,ur=g,je=b,Ae=I,He=L}}function Zm(o,l){let f=l.reactions;if(f!==null){var u=cm.call(f,o);if(u!==-1){var _=f.length-1;_===0?f=l.reactions=null:(f[u]=f[_],f.pop())}}f===null&&l.f&Be&&(Se===null||!Se.includes(l))&&(Ve(l,Fr),l.f&(_r|wt)||(l.f^=wt),jr(l,0))}function jr(o,l){var f=o.deps;if(f!==null)for(var u=l;u<f.length;u++)Zm(o,f[u])}function xn(o){var l=o.f;if(!(l&Tr)){Ve(o,De);var f=ie,u=Ae;ie=o;try{l&Dt?Xm(o):$a(o),Ka(o),Qa(o);var _=si(o);o.teardown=typeof _=="function"?_:null,o.wv=ni;var g=o.deps,b;fn&&Am&&o.f&rr}catch(I){Pt(I,o,f,u||o.ctx)}finally{ie=f}}}function li(){if(Ar>1e3){Ar=0;try{bm()}catch(o){if(Hr!==null)Pt(o,Hr,null);else throw o}}Ar++}function ui(o){var l=o.length;if(l!==0){li();var f=Sr;Sr=!0;try{for(var u=0;u<l;u++){var _=o[u];_.f&De||(_.f^=De);var g=[];ci(_,g),Jm(g)}}finally{Sr=f}}}function Jm(o){var l=o.length;if(l!==0)for(var f=0;f<l;f++){var u=o[f];if(!(u.f&(Tr|qe)))try{Kr(u)&&(xn(u),u.deps===null&&u.first===null&&u.nodes_start===null&&(u.teardown===null?Za(u):u.fn=null))}catch(_){Pt(_,u,null,u.ctx)}}}function e_(){if(qr=!1,Ar>1001)return;const o=mr;mr=[],ui(o),qr||(Ar=0,Hr=null)}function Rt(o){yt===ti&&(qr||(qr=!0,queueMicrotask(e_))),Hr=o;for(var l=o;l.parent!==null;){l=l.parent;var f=l.f;if(f&(Vr|er)){if(!(f&De))return;l.f^=De}}mr.push(l)}function ci(o,l){var f=o.first,u=[];e:for(;f!==null;){var _=f.f,g=(_&er)!==0,b=g&&(_&De)!==0,I=f.next;if(!b&&!(_&qe))if(_&At){if(g)f.f^=De;else try{Kr(f)&&xn(f)}catch(k){Pt(k,f,null,f.ctx)}var L=f.first;if(L!==null){f=L;continue}}else _&Ba&&u.push(f);if(I===null){let k=f.parent;for(;k!==null;){if(o===k)break e;var w=k.next;if(w!==null){f=w;continue e}k=k.parent}}f=I}for(var F=0;F<u.length;F++)L=u[F],l.push(L),ci(L,l)}function fi(o){var l=yt,f=mr;try{li();const _=[];yt=Vm,mr=_,qr=!1,ui(f);var u=o==null?void 0:o();return Wm(),(mr.length>0||_.length>0)&&fi(),Ar=0,Hr=null,u}finally{yt=l,mr=f}}async function r_(){await Promise.resolve(),fi()}function U(o){var F;var l=o.f,f=(l&Be)!==0;if(f&&l&Tr){var u=Wa(o);return yn(o),u}if(ae!==null&&!He){je!==null&&je.includes(o)&&Cm();var _=ae.deps;o.rv<St&&(o.rv=St,Se===null&&_!==null&&_[Pe]===o?Pe++:Se===null?Se=[o]:Se.push(o))}else if(f&&o.deps===null)for(var g=o,b=g.parent,I=g;b!==null;)if(b.f&Be){var L=b;I=L,b=L.parent}else{var w=b;(F=w.deriveds)!=null&&F.includes(I)||(w.deriveds??(w.deriveds=[])).push(I);break}return f&&(g=o,Kr(g)&&Va(g)),o.v}function Bt(o){var l=He;try{return He=!0,o()}finally{He=l}}const t_=-7169;function Ve(o,l){o.f=o.f&t_|l}function Cn(o,l=!1,f){Ae={p:Ae,c:null,e:null,m:!1,s:o,x:null,l:null}}function Sn(o){const l=Ae;if(l!==null){const b=l.e;if(b!==null){var f=ie,u=ae;l.e=null;try{for(var _=0;_<b.length;_++){var g=b[_];We(g.effect),Xe(g.reaction),Qr(g.fn)}}finally{We(f),Xe(u)}}Ae=l.p,l.m=!0}return{}}const n_=["touchstart","touchmove"];function a_(o){return n_.includes(o)}function i_(o){var l=ae,f=ie;Xe(null),We(null);try{return o()}finally{Xe(l),We(f)}}const di=new Set,vn=new Set;function o_(o,l,f,u={}){function _(g){if(u.capture||Nr.call(l,g),!g.cancelBubble)return i_(()=>f==null?void 0:f.call(this,g))}return o.startsWith("pointer")||o.startsWith("touch")||o==="wheel"?bn(()=>{l.addEventListener(o,_,u)}):l.addEventListener(o,_,u),_}function vi(o,l,f,u={}){var _=o_(l,o,f,u);return()=>{o.removeEventListener(l,_,u)}}function An(o){for(var l=0;l<o.length;l++)di.add(o[l]);for(var f of vn)f(o)}function Nr(o){var Y;var l=this,f=l.ownerDocument,u=o.type,_=((Y=o.composedPath)==null?void 0:Y.call(o))||[],g=_[0]||o.target,b=0,I=o.__root;if(I){var L=_.indexOf(I);if(L!==-1&&(l===document||l===window)){o.__root=l;return}var w=_.indexOf(l);if(w===-1)return;L<=w&&(b=L)}if(g=_[b]||o.target,g!==l){fm(o,"currentTarget",{configurable:!0,get(){return g||f}});var F=ae,k=ie;Xe(null),We(null);try{for(var A,T=[];g!==null;){var G=g.assignedSlot||g.parentNode||g.host||null;try{var z=g["__"+u];if(z!==void 0&&!g.disabled)if(hn(z)){var[X,...V]=z;X.apply(g,[o,...V])}else z.call(g,o)}catch(Q){A?T.push(Q):A=Q}if(o.cancelBubble||G===l||G===null)break;g=G}if(A){for(let Q of T)queueMicrotask(()=>{throw Q});throw A}}finally{o.__root=l,delete o.currentTarget,Xe(F),We(k)}}}function mi(o){var l=document.createElement("template");return l.innerHTML=o,l.content}function mn(o,l){var f=ie;f.nodes_start===null&&(f.nodes_start=o,f.nodes_end=l)}function Ye(o,l){var f=(l&Pm)!==0,u=(l&Rm)!==0,_,g=!o.startsWith("<!>");return()=>{_===void 0&&(_=mi(g?o:"<!>"+o),f||(_=zr(_)));var b=u?document.importNode(_,!0):_.cloneNode(!0);if(f){var I=zr(b),L=b.lastChild;mn(I,L)}else mn(b,b);return b}}function Ue(o,l){o!==null&&o.before(l)}let _n=!0;function _i(o,l){var f=l==null?"":typeof l=="object"?l+"":l;f!==(o.__t??(o.__t=o.nodeValue))&&(o.__t=f,o.nodeValue=f==null?"":f+"")}function s_(o,l){return l_(o,l)}const xr=new Map;function l_(o,{target:l,anchor:f,props:u={},events:_,context:g,intro:b=!0}){Om();var I=new Set,L=k=>{for(var A=0;A<k.length;A++){var T=k[A];if(!I.has(T)){I.add(T);var G=a_(T);l.addEventListener(T,Nr,{passive:G});var z=xr.get(T);z===void 0?(document.addEventListener(T,Nr,{passive:G}),xr.set(T,1)):xr.set(T,z+1)}}};L(pn(di)),vn.add(L);var w=void 0,F=jm(()=>{var k=f??l.appendChild(ja());return Dr(()=>{if(g){Cn({});var A=Ae;A.c=g}_&&(u.$$events=_),_n=b,w=o(k,u)||{},_n=!0,g&&Sn()}),()=>{var G;for(var A of I){l.removeEventListener(A,Nr);var T=xr.get(A);--T===0?(document.removeEventListener(A,Nr),xr.delete(A)):xr.set(A,T)}vn.delete(L),k!==f&&((G=k.parentNode)==null||G.removeChild(k))}});return u_.set(w,F),w}let u_=new WeakMap;function Cr(o,l,f=!1){var u=o,_=null,g=null,b=Ce,I=f?Ft:0,L=!1;const w=(k,A=!0)=>{L=!0,F(A,k)},F=(k,A)=>{b!==(b=k)&&(b?(_?xt(_):A&&(_=Dr(()=>A(u))),g&&kt(g,()=>{g=null})):(g?xt(g):A&&(g=Dr(()=>A(u))),_&&kt(_,()=>{_=null})))};Lt(()=>{L=!1,l(w),L||F(null,null)},I)}function un(o,l){return l}function c_(o,l,f,u){for(var _=[],g=l.length,b=0;b<g;b++)wn(l[b].e,_,!0);var I=g>0&&_.length===0&&f!==null;if(I){var L=f.parentNode;Im(L),L.append(f),u.clear(),lr(o,l[0].prev,l[g-1].next)}Ja(_,()=>{for(var w=0;w<g;w++){var F=l[w];I||(u.delete(F.k),lr(o,F.prev,F.next)),Je(F.e,!I)}})}function cn(o,l,f,u,_,g=null){var b=o,I={flags:l,items:new Map,first:null};{var L=o;b=L.appendChild(ja())}var w=null,F=!1,k=Gm(()=>{var A=f();return hn(A)?A:A==null?[]:pn(A)});Lt(()=>{var A=U(k),T=A.length;if(!(F&&T===0)){F=T===0;{var G=ae;f_(A,I,b,_,l,(G.f&qe)!==0,u,f)}g!==null&&(T===0?w?xt(w):w=Dr(()=>g(b)):w!==null&&kt(w,()=>{w=null})),U(k)}})}function f_(o,l,f,u,_,g,b,I){var L=o.length,w=l.items,F=l.first,k=F,A,T=null,G=[],z=[],X,V,Y,Q;for(Q=0;Q<L;Q+=1){if(X=o[Q],V=b(X,Q),Y=w.get(V),Y===void 0){var me=k?k.e.nodes_start:f;T=v_(me,l,T,T===null?l.first:T.next,X,V,Q,u,_,I),w.set(V,T),G=[],z=[],k=T.next;continue}if(d_(Y,X,Q),Y.e.f&qe&&xt(Y.e),Y!==k){if(A!==void 0&&A.has(Y)){if(G.length<z.length){var N=z[0],$;T=N.prev;var _e=G[0],ge=G[G.length-1];for($=0;$<G.length;$+=1)ba(G[$],N,f);for($=0;$<z.length;$+=1)A.delete(z[$]);lr(l,_e.prev,ge.next),lr(l,T,_e),lr(l,ge,N),k=N,T=ge,Q-=1,G=[],z=[]}else A.delete(Y),ba(Y,k,f),lr(l,Y.prev,Y.next),lr(l,Y,T===null?l.first:T.next),lr(l,T,Y),T=Y;continue}for(G=[],z=[];k!==null&&k.k!==V;)(g||!(k.e.f&qe))&&(A??(A=new Set)).add(k),z.push(k),k=k.next;if(k===null)continue;Y=k}G.push(Y),T=Y,k=Y.next}if(k!==null||A!==void 0){for(var v=A===void 0?[]:pn(A);k!==null;)(g||!(k.e.f&qe))&&v.push(k),k=k.next;var Z=v.length;if(Z>0){var q=L===0?f:null;c_(l,v,q,w)}}ie.first=l.first&&l.first.e,ie.last=T&&T.e}function d_(o,l,f,u){Na(o.v,l),o.i=f}function v_(o,l,f,u,_,g,b,I,L,w){var F=(L&Dm)!==0,k=(L&Tm)===0,A=F?k?Bm(_):Re(_):_,T=L&Fm?Re(b):b,G={i:T,v:A,k:g,a:null,e:null,prev:f,next:u};try{return G.e=Dr(()=>I(o,A,T,w),za),G.e.prev=f&&f.e,G.e.next=u&&u.e,f===null?l.first=G:(f.next=G,f.e.next=G.e),u!==null&&(u.prev=G,u.e.prev=G.e),G}finally{}}function ba(o,l,f){for(var u=o.next?o.next.e.nodes_start:f,_=l?l.e.nodes_start:f,g=o.e.nodes_start;g!==u;){var b=Tt(g);_.before(g),g=b}}function lr(o,l,f){l===null?o.first=f:(l.next=f,l.e.next=f&&f.e),f!==null&&(f.prev=l,f.e.prev=l&&l.e)}function m_(o,l,f,u,_){var g=o,b="",I;Lt(()=>{b!==(b=l()??"")&&(I!==void 0&&(Je(I),I=void 0),b!==""&&(I=Dr(()=>{var L=b+"",w=mi(L);mn(zr(w),w.lastChild),g.before(w)})))})}function ka(o,l,f){Qr(()=>{var u=Bt(()=>l(o,f==null?void 0:f())||{});if(u!=null&&u.destroy)return()=>u.destroy()})}function gi(o){var l,f,u="";if(typeof o=="string"||typeof o=="number")u+=o;else if(typeof o=="object")if(Array.isArray(o)){var _=o.length;for(l=0;l<_;l++)o[l]&&(f=gi(o[l]))&&(u&&(u+=" "),u+=f)}else for(f in o)o[f]&&(u&&(u+=" "),u+=f);return u}function __(){for(var o,l,f=0,u="",_=arguments.length;f<_;f++)(o=arguments[f])&&(l=gi(o))&&(u&&(u+=" "),u+=l);return u}function Ge(o){return typeof o=="object"?__(o):o??""}function ir(o,l,f,u){var _=o.__attributes??(o.__attributes={});_[l]!==(_[l]=f)&&(f==null?o.removeAttribute(l):typeof f!="string"&&g_(o).includes(l)?o[l]=f:o.setAttribute(l,f))}var xa=new Map;function g_(o){var l=xa.get(o.nodeName);if(l)return l;xa.set(o.nodeName,l=[]);for(var f,u=o,_=Element.prototype;_!==u;){f=dm(u);for(var g in f)f[g].set&&l.push(g);u=Ra(u)}return l}function Ne(o,l,f){var u=o.__className,_=h_(l,f);(u!==_||za)&&(l==null&&!f?o.removeAttribute("class"):o.className=_,o.__className=_)}function h_(o,l){return(o??"")+(l?" "+l:"")}const p_=()=>performance.now(),Ze={tick:o=>requestAnimationFrame(o),now:()=>p_(),tasks:new Set};function hi(){const o=Ze.now();Ze.tasks.forEach(l=>{l.c(o)||(Ze.tasks.delete(l),l.f())}),Ze.tasks.size!==0&&Ze.tick(hi)}function y_(o){let l;return Ze.tasks.size===0&&Ze.tick(hi),{promise:new Promise(f=>{Ze.tasks.add(l={c:o,f})}),abort(){Ze.tasks.delete(l)}}}function gt(o,l){o.dispatchEvent(new CustomEvent(l))}function E_(o){if(o==="float")return"cssFloat";if(o==="offset")return"cssOffset";if(o.startsWith("--"))return o;const l=o.split("-");return l.length===1?l[0]:l[0]+l.slice(1).map(f=>f[0].toUpperCase()+f.slice(1)).join("")}function Ca(o){const l={},f=o.split(";");for(const u of f){const[_,g]=u.split(":");if(!_||g===void 0)break;const b=E_(_.trim());l[b]=g.trim()}return l}const w_=o=>o;function Sa(o,l,f,u){var _=(o&Lm)!==0,g="both",b,I=l.inert,L=l.style.overflow,w,F;function k(){var X=ae,V=ie;Xe(null),We(null);try{return b??(b=f()(l,(u==null?void 0:u())??{},{direction:g}))}finally{Xe(X),We(V)}}var A={is_global:_,in(){l.inert=I,gt(l,"introstart"),w=gn(l,k(),F,1,()=>{gt(l,"introend"),w==null||w.abort(),w=b=void 0,l.style.overflow=L})},out(X){l.inert=!0,gt(l,"outrostart"),F=gn(l,k(),w,0,()=>{gt(l,"outroend"),X==null||X()})},stop:()=>{w==null||w.abort(),F==null||F.abort()}},T=ie;if((T.transitions??(T.transitions=[])).push(A),_n){var G=_;if(!G){for(var z=T.parent;z&&z.f&Ft;)for(;(z=z.parent)&&!(z.f&Dt););G=!z||(z.f&Ma)!==0}G&&Qr(()=>{Bt(()=>A.in())})}}function gn(o,l,f,u,_){var g=u===1;if(_m(l)){var b,I=!1;return bn(()=>{if(!I){var X=l({direction:g?"in":"out"});b=gn(o,X,f,u,_)}}),{abort:()=>{I=!0,b==null||b.abort()},deactivate:()=>b.deactivate(),reset:()=>b.reset(),t:()=>b.t()}}if(f==null||f.deactivate(),!(l!=null&&l.duration))return _(),{abort:Gr,deactivate:Gr,reset:Gr,t:()=>u};const{delay:L=0,css:w,tick:F,easing:k=w_}=l;var A=[];if(g&&f===void 0&&(F&&F(0,1),w)){var T=Ca(w(0,1));A.push(T,T)}var G=()=>1-u,z=o.animate(A,{duration:L});return z.onfinish=()=>{var X=(f==null?void 0:f.t())??1-u;f==null||f.abort();var V=u-X,Y=l.duration*Math.abs(V),Q=[];if(Y>0){var me=!1;if(w)for(var N=Math.ceil(Y/16.666666666666668),$=0;$<=N;$+=1){var _e=X+V*k($/N),ge=Ca(w(_e,1-_e));Q.push(ge),me||(me=ge.overflow==="hidden")}me&&(o.style.overflow="hidden"),G=()=>{var v=z.currentTime;return X+V*k(v/Y)},F&&y_(()=>{if(z.playState!=="running")return!1;var v=G();return F(v,1-v),!0})}z=o.animate(Q,{duration:Y,fill:"forwards"}),z.onfinish=()=>{G=()=>u,F==null||F(u,1-u),_()}},{abort:()=>{z&&(z.cancel(),z.effect=null,z.onfinish=Gr)},deactivate:()=>{_=Gr},reset:()=>{u===0&&(F==null||F(1,0))},t:()=>G()}}function Aa(o,l){return o===l||(o==null?void 0:o[ht])===l}function Da(o={},l,f,u){return Qr(()=>{var _,g;return Ya(()=>{_=g,g=[],Bt(()=>{o!==f(...g)&&(l(o,...g),_&&Aa(f(..._),o)&&l(null,..._))})}),()=>{bn(()=>{g&&Aa(f(...g),o)&&l(null,...g)})}}),o}const b_="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(b_);function k_(o){const l=o-1;return l*l*l+1}function Fa(o,{delay:l=0,duration:f=400,easing:u=k_,axis:_="y"}={}){const g=getComputedStyle(o),b=+g.opacity,I=_==="y"?"height":"width",L=parseFloat(g[I]),w=_==="y"?["top","bottom"]:["left","right"],F=w.map(V=>`${V[0].toUpperCase()}${V.slice(1)}`),k=parseFloat(g[`padding${F[0]}`]),A=parseFloat(g[`padding${F[1]}`]),T=parseFloat(g[`margin${F[0]}`]),G=parseFloat(g[`margin${F[1]}`]),z=parseFloat(g[`border${F[0]}Width`]),X=parseFloat(g[`border${F[1]}Width`]);return{delay:l,duration:f,easing:u,css:V=>`overflow: hidden;opacity: ${Math.min(V*20,1)*b};${I}: ${V*L}px;padding-${w[0]}: ${V*k}px;padding-${w[1]}: ${V*A}px;margin-${w[0]}: ${V*T}px;margin-${w[1]}: ${V*G}px;border-${w[0]}-width: ${V*z}px;border-${w[1]}-width: ${V*X}px;min-${I}: 0`}}function x_(o){ne(o,o.v+1)}function C_(o){let l=0,f=Re(0),u;return()=>{qm()&&(U(f),Ya(()=>(l===0&&(u=Bt(()=>o(()=>x_(f)))),l+=1,()=>{r_().then(()=>{l-=1,l===0&&(u==null||u(),u=void 0)})})))}}var Xr,Wr;class pi{constructor(l,f){sn(this,Xr);sn(this,Wr);ln(this,Xr,l),ln(this,Wr,C_(f))}get current(){return on(this,Wr).call(this),on(this,Xr).call(this)}}Xr=new WeakMap,Wr=new WeakMap;const Ta=new pi(()=>window.innerWidth,o=>vi(window,"resize",o)),La=new pi(()=>window.innerHeight,o=>vi(window,"resize",o));var S_=Ye("<li><button> </button></li>");function Pa(o,l){var f=S_(),u=Ie(f);u.__click=function(...g){var b;(b=l.onClick)==null||b.apply(this,g)};var _=Ie(u);En(()=>{Ne(u,Ge(l.isSelected?"selected":""),"svelte-qtkxa2"),_i(_,l.text)}),Ue(o,f)}An(["click"]);const ee=Object.freeze({B:32768,Y:16384,SELECT:8192,START:4096,U:2048,D:1024,L:512,R:256,A:128,X:64,LB:32,RB:16}),or=(o,l,f)=>{try{o.preventDefault()}catch{}const u=o.target.getAttribute("btn");ne(l,U(l)|u),f.updateMobileButtonsDown(U(l))},sr=(o,l,f)=>{try{o.preventDefault()}catch{}const u=o.target.getAttribute("btn");ne(l,U(l)&(~u&65535)),f.updateMobileButtonsDown(U(l))},A_=(o,l,f,u,_)=>{ne(l,!1),ne(f,U(f)&61695),u.updateMobileButtonsDown(U(f)),ne(_,ze(U(f)))};var D_=Ye('<div id="ctrl" class="svelte-wmylbm"><div id="ctrl_lb">L</div> <div id="ctrl_rb">R</div> <div id="ctrl_dpad"><div id="ctrl_left" class="svelte-wmylbm"></div> <div id="ctrl_right" class="svelte-wmylbm"></div> <div id="ctrl_up" class="svelte-wmylbm"></div> <div id="ctrl_down" class="svelte-wmylbm"></div> <div id="ctrl_dpad_touchsurface" class="svelte-wmylbm"></div></div> <div id="ctrl_select">Select</div> <div id="ctrl_start">Start</div> <div id="ctrl_a">A</div> <div id="ctrl_b">B</div> <div id="ctrl_x">X</div> <div id="ctrl_y">Y</div></div>');function F_(o,l){Cn(l,!0);let f=vr(0),u=vr(0),_=vr(!1),g,b,I,L;const w=$=>{({x:g,y:b,width:I,height:L}=$.target.getBoundingClientRect()),F($)},F=$=>{ne(_,!0),ne(f,U(f)&61695);let{clientX:_e,clientY:ge}=$.targetTouches[0];if(_e-=g+I/2,ge-=b+L/2,ge*=-1,Math.hypot(_e,ge)>I/6){const v=Math.atan2(ge,_e)*180/Math.PI;ne(f,U(f)|(v>45/2&&v<180-45/2?ee.U:0)),ne(f,U(f)|(v<-45/2&&v>-180+45/2?ee.D:0)),ne(f,U(f)|(v>90+45/2||v<-90-45/2?ee.L:0)),ne(f,U(f)|(v<90-45/2&&v>-90+45/2?ee.R:0))}U(f)!==U(u)&&l.updateMobileButtonsDown(U(f)),ne(u,ze(U(f)))};var k=D_(),A=Ie(k);A.__touchstart=[or,f,l],A.__touchend=[sr,f,l];var T=Ee(A,2);T.__touchstart=[or,f,l],T.__touchend=[sr,f,l];var G=Ee(T,2),z=Ee(Ie(G),8);z.__touchstart=w,z.__touchmove=F,z.__touchend=[A_,_,f,l,u];var X=Ee(G,2);X.__touchstart=[or,f,l],X.__touchend=[sr,f,l];var V=Ee(X,2);V.__touchstart=[or,f,l],V.__touchend=[sr,f,l];var Y=Ee(V,2);Y.__touchstart=[or,f,l],Y.__touchend=[sr,f,l];var Q=Ee(Y,2);Q.__touchstart=[or,f,l],Q.__touchend=[sr,f,l];var me=Ee(Q,2);me.__touchstart=[or,f,l],me.__touchend=[sr,f,l];var N=Ee(me,2);N.__touchstart=[or,f,l],N.__touchend=[sr,f,l],En(()=>{ir(A,"btn",ee.LB),Ne(A,Ge(["capsuleBtn",U(f)&ee.LB&&"btnPressed"]),"svelte-wmylbm"),ir(T,"btn",ee.RB),Ne(T,Ge(["capsuleBtn",U(f)&ee.RB&&"btnPressed"]),"svelte-wmylbm"),Ne(G,Ge(U(_)?"btnPressed":""),"svelte-wmylbm"),ir(X,"btn",ee.SELECT),Ne(X,Ge(["capsuleBtn",U(f)&ee.SELECT&&"btnPressed"]),"svelte-wmylbm"),ir(V,"btn",ee.START),Ne(V,Ge(["capsuleBtn",U(f)&ee.START&&"btnPressed"]),"svelte-wmylbm"),ir(Y,"btn",ee.A),Ne(Y,Ge(["roundBtn",U(f)&ee.A&&"btnPressed"]),"svelte-wmylbm"),ir(Q,"btn",ee.B),Ne(Q,Ge(["roundBtn",U(f)&ee.B&&"btnPressed"]),"svelte-wmylbm"),ir(me,"btn",ee.X),Ne(me,Ge(["roundBtn",U(f)&ee.X&&"btnPressed"]),"svelte-wmylbm"),ir(N,"btn",ee.Y),Ne(N,Ge(["roundBtn",U(f)&ee.Y&&"btnPressed"]),"svelte-wmylbm")}),Ue(o,k),Sn()}An(["touchstart","touchend","touchmove"]);var T_=(()=>{var o=import.meta.url;return async function(l={}){var f,u=l,_,g,b=new Promise((e,r)=>{_=e,g=r}),I=Object.assign({},u),L=[],w="./this.program",F=(e,r)=>{throw r},k="";function A(e){return u.locateFile?u.locateFile(e,k):k+e}var T,G;typeof document<"u"&&document.currentScript&&(k=document.currentScript.src),o&&(k=o),k.startsWith("blob:")?k="":k=k.substr(0,k.replace(/[?#].*/,"").lastIndexOf("/")+1),T=async e=>{var r=await fetch(e,{credentials:"same-origin"});if(r.ok)return r.arrayBuffer();throw new Error(r.status+" : "+r.url)};var z=u.print||console.log.bind(console),X=u.printErr||console.error.bind(console);Object.assign(u,I),I=null,u.arguments&&(L=u.arguments),u.thisProgram&&(w=u.thisProgram);var V=u.wasmBinary,Y,Q=!1,me,N,$,_e,ge,v,Z,q,Fe,he,gr="data:application/octet-stream;base64,",$r=e=>e.startsWith(gr);function Zr(){var e=Y.buffer;u.HEAP8=N=new Int8Array(e),u.HEAP16=_e=new Int16Array(e),u.HEAPU8=$=new Uint8Array(e),u.HEAPU16=ge=new Uint16Array(e),u.HEAP32=v=new Int32Array(e),u.HEAPU32=Z=new Uint32Array(e),u.HEAPF32=q=new Float32Array(e),u.HEAPF64=he=new Float64Array(e),u.HEAP64=Fe=new BigInt64Array(e),u.HEAPU64=new BigUint64Array(e)}var hr=[],Jr=[],Mt=[],Lr=[];function et(){if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)It(u.preRun.shift());at(hr)}function rt(){!u.noFSInit&&!s.initialized&&s.init(),s.ignorePermissions=!1,at(Jr)}function tt(){at(Mt)}function Ot(){if(u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;)nt(u.postRun.shift());at(Lr)}function It(e){hr.unshift(e)}function Gt(e){Jr.unshift(e)}function nt(e){Lr.unshift(e)}var Qe=0,cr=null;function Pr(e){var r;Qe++,(r=u.monitorRunDependencies)==null||r.call(u,Qe)}function pr(e){var t;if(Qe--,(t=u.monitorRunDependencies)==null||t.call(u,Qe),Qe==0&&cr){var r=cr;cr=null,r()}}function M(e){var t;(t=u.onAbort)==null||t.call(u,e),e="Aborted("+e+")",X(e),Q=!0,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw g(r),r}var re;function ke(){if(u.locateFile){var e="snes9x.wasm";return $r(e)?e:A(e)}return new URL(""+new URL("snes9x-CwR-U8fX.wasm",import.meta.url).href,import.meta.url).href}function fe(e){if(e==re&&V)return new Uint8Array(V);throw"both async and sync fetching of the wasm failed"}async function Ke(e){if(!V)try{var r=await T(e);return new Uint8Array(r)}catch{}return fe(e)}async function tr(e,r){try{var t=await Ke(e),n=await WebAssembly.instantiate(t,r);return n}catch(a){X(`failed to asynchronously prepare wasm: ${a}`),M(a)}}async function yr(e,r,t){if(!e&&typeof WebAssembly.instantiateStreaming=="function"&&!$r(r))try{var n=fetch(r,{credentials:"same-origin"}),a=await WebAssembly.instantiateStreaming(n,t);return a}catch(i){X(`wasm streaming compile failed: ${i}`),X("falling back to ArrayBuffer instantiation")}return tr(r,t)}function Rr(){return{a:rm}}async function fr(){function e(i,c){return pe=i.exports,Y=pe.Ed,Zr(),$n=pe.Nd,Gt(pe.Fd),pr(),pe}Pr();function r(i){return e(i.instance)}var t=Rr();if(u.instantiateWasm)try{return u.instantiateWasm(t,e)}catch(i){X(`Module.instantiateWasm callback failed with error: ${i}`),g(i)}re??(re=ke());try{var n=await yr(V,re,t),a=r(n);return a}catch(i){return g(i),Promise.reject(i)}}var Er={142792:()=>{console.log("Syncing file system..."),s.mkdir("/home/web_user/.snes9x"),s.mkdir("/home/web_user/.snes9x/sram"),s.mount(J,{},"/home/web_user/.snes9x/sram"),s.syncfs(!0,function(e){e?console.log(e):(console.log("File system synced."),window.initSnesReady=!0)})},143101:()=>{s.syncfs(!1,function(e){e?(console.log("Error saving sram file."),console.log(e)):console.log("File system synced")})},143253:e=>{var r=xe(e)+`

Abort/Retry/Ignore/AlwaysIgnore? [ariA] :`,t=window.prompt(r,"i");return t===null&&(t="i"),allocate(Ht(t),"i8",ALLOC_NORMAL)},143478:()=>typeof AudioContext<"u"?!0:typeof webkitAudioContext<"u",143625:()=>typeof navigator.mediaDevices<"u"&&typeof navigator.mediaDevices.getUserMedia<"u"?!0:typeof navigator.webkitGetUserMedia<"u",143859:e=>{typeof u.SDL2>"u"&&(u.SDL2={});var r=u.SDL2;return e?r.capture={}:r.audio={},r.audioContext||(typeof AudioContext<"u"?r.audioContext=new AudioContext:typeof webkitAudioContext<"u"&&(r.audioContext=new webkitAudioContext),r.audioContext&&typeof navigator.userActivation>"u"&&Wv(r.audioContext)),r.audioContext===void 0?-1:0},144411:()=>{var e=u.SDL2;return e.audioContext.sampleRate},144479:(e,r,t,n)=>{var a=u.SDL2,i=function(m){a.capture.silenceTimer!==void 0&&(clearInterval(a.capture.silenceTimer),a.capture.silenceTimer=void 0,a.capture.silenceBuffer=void 0),a.capture.mediaStreamNode=a.audioContext.createMediaStreamSource(m),a.capture.scriptProcessorNode=a.audioContext.createScriptProcessor(r,e,1),a.capture.scriptProcessorNode.onaudioprocess=function(p){a===void 0||a.capture===void 0||(p.outputBuffer.getChannelData(0).fill(0),a.capture.currentCaptureBuffer=p.inputBuffer,_t("vi",t,[n]))},a.capture.mediaStreamNode.connect(a.capture.scriptProcessorNode),a.capture.scriptProcessorNode.connect(a.audioContext.destination),a.capture.stream=m},c=function(m){};a.capture.silenceBuffer=a.audioContext.createBuffer(e,r,a.audioContext.sampleRate),a.capture.silenceBuffer.getChannelData(0).fill(0);var d=function(){a.capture.currentCaptureBuffer=a.capture.silenceBuffer,_t("vi",t,[n])};a.capture.silenceTimer=setInterval(d,r/a.audioContext.sampleRate*1e3),navigator.mediaDevices!==void 0&&navigator.mediaDevices.getUserMedia!==void 0?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(i).catch(c):navigator.webkitGetUserMedia!==void 0&&navigator.webkitGetUserMedia({audio:!0,video:!1},i,c)},146172:(e,r,t,n)=>{var a=u.SDL2;if(a.audio.scriptProcessorNode=a.audioContext.createScriptProcessor(r,0,e),a.audio.scriptProcessorNode.onaudioprocess=function(c){a===void 0||a.audio===void 0||(a.audio.silenceTimer!==void 0&&(clearInterval(a.audio.silenceTimer),a.audio.silenceTimer=void 0,a.audio.silenceBuffer=void 0),a.audio.currentOutputBuffer=c.outputBuffer,_t("vi",t,[n]))},a.audio.scriptProcessorNode.connect(a.audioContext.destination),a.audioContext.state==="suspended"){a.audio.silenceBuffer=a.audioContext.createBuffer(e,r,a.audioContext.sampleRate),a.audio.silenceBuffer.getChannelData(0).fill(0);var i=function(){typeof navigator.userActivation<"u"&&navigator.userActivation.hasBeenActive&&a.audioContext.resume(),a.audio.currentOutputBuffer=a.audio.silenceBuffer,_t("vi",t,[n]),a.audio.currentOutputBuffer=void 0};a.audio.silenceTimer=setInterval(i,r/a.audioContext.sampleRate*1e3)}},147347:(e,r)=>{for(var t=u.SDL2,n=t.capture.currentCaptureBuffer.numberOfChannels,a=0;a<n;++a){var i=t.capture.currentCaptureBuffer.getChannelData(a);if(i.length!=r)throw"Web Audio capture buffer length mismatch! Destination size: "+i.length+" samples vs expected "+r+" samples!";if(n==1)for(var c=0;c<r;++c)Tn(e+c*4,i[c],"float");else for(var c=0;c<r;++c)Tn(e+(c*n+a)*4,i[c],"float")}},147952:(e,r)=>{for(var t=u.SDL2,n=e>>>2,a=t.audio.currentOutputBuffer.numberOfChannels,i=0;i<a;++i){var c=t.audio.currentOutputBuffer.getChannelData(i);if(c.length!=r)throw"Web Audio output buffer length mismatch! Destination size: "+c.length+" samples vs expected "+r+" samples!";for(var d=0;d<r;++d)c[d]=q[n+(d*a+i)]}},148441:e=>{var r=u.SDL2;if(e){if(r.capture.silenceTimer!==void 0&&clearInterval(r.capture.silenceTimer),r.capture.stream!==void 0)for(var t=r.capture.stream.getAudioTracks(),n=0;n<t.length;n++)r.capture.stream.removeTrack(t[n]);r.capture.scriptProcessorNode!==void 0&&(r.capture.scriptProcessorNode.onaudioprocess=function(a){},r.capture.scriptProcessorNode.disconnect()),r.capture.mediaStreamNode!==void 0&&r.capture.mediaStreamNode.disconnect(),r.capture=void 0}else r.audio.scriptProcessorNode!=null&&r.audio.scriptProcessorNode.disconnect(),r.audio.silenceTimer!==void 0&&clearInterval(r.audio.silenceTimer),r.audio=void 0;r.audioContext!==void 0&&r.audio===void 0&&r.capture===void 0&&(r.audioContext.close(),r.audioContext=void 0)},149447:(e,r,t)=>{var n=e,a=r,i=t;u.SDL2||(u.SDL2={});var c=u.SDL2;c.ctxCanvas!==u.canvas&&(c.ctx=u.createContext(u.canvas,!1,!0),c.ctxCanvas=u.canvas),(c.w!==n||c.h!==a||c.imageCtx!==c.ctx)&&(c.image=c.ctx.createImageData(n,a),c.w=n,c.h=a,c.imageCtx=c.ctx);var d=c.image.data,m=i/4,p=0,E;if(typeof CanvasPixelArray<"u"&&d instanceof CanvasPixelArray)for(E=d.length;p<E;){var S=v[m];d[p]=S&255,d[p+1]=S>>8&255,d[p+2]=S>>16&255,d[p+3]=255,m++,p+=4}else{c.data32Data!==d&&(c.data32=new Int32Array(d.buffer),c.data8=new Uint8Array(d.buffer),c.data32Data=d);var O=c.data32;E=O.length,O.set(v.subarray(m,m+E));var C=c.data8,D=3,W=D+4*E;if(E%8==0)for(;D<W;)C[D]=255,D=D+4|0,C[D]=255,D=D+4|0,C[D]=255,D=D+4|0,C[D]=255,D=D+4|0,C[D]=255,D=D+4|0,C[D]=255,D=D+4|0,C[D]=255,D=D+4|0,C[D]=255,D=D+4|0;else for(;D<W;)C[D]=255,D=D+4|0}c.ctx.putImageData(c.image,0,0)},150915:(e,r,t,n,a)=>{var i=e,c=r,d=t,m=n,p=a,E=document.createElement("canvas");E.width=i,E.height=c;var S=E.getContext("2d"),O=S.createImageData(i,c),C=O.data,D=p/4,W=0,K;if(typeof CanvasPixelArray<"u"&&C instanceof CanvasPixelArray)for(K=C.length;W<K;){var j=v[D];C[W]=j&255,C[W+1]=j>>8&255,C[W+2]=j>>16&255,C[W+3]=j>>24&255,D++,W+=4}else{var ve=new Int32Array(C.buffer);K=ve.length,ve.set(v.subarray(D,D+K))}S.putImageData(O,0,0);var le=d===0&&m===0?"url("+E.toDataURL()+"), auto":"url("+E.toDataURL()+") "+d+" "+m+", auto",ue=Me(le.length+1);return se(le,ue,le.length+1),ue},151903:e=>{u.canvas&&(u.canvas.style.cursor=xe(e))},151986:()=>{u.canvas&&(u.canvas.style.cursor="none")},152055:()=>window.innerWidth,152085:()=>window.innerHeight};class Dn{constructor(r){Oe(this,"name","ExitStatus");this.message=`Program terminated with exit(${r})`,this.status=r}}var at=e=>{for(;e.length>0;)e.shift()(u)},Fn=u.noExitRuntime||!0;function Tn(e,r,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":N[e]=r;break;case"i8":N[e]=r;break;case"i16":_e[e>>1]=r;break;case"i32":v[e>>2]=r;break;case"i64":Fe[e>>3]=BigInt(r);break;case"float":q[e>>2]=r;break;case"double":he[e>>3]=r;break;case"*":Z[e>>2]=r;break;default:M(`invalid type for setValue: ${t}`)}}var Nt=e=>nm(e),Ut=()=>im(),Ln=typeof TextDecoder<"u"?new TextDecoder:void 0,wr=(e,r=0,t=NaN)=>{for(var n=r+t,a=r;e[a]&&!(a>=n);)++a;if(a-r>16&&e.buffer&&Ln)return Ln.decode(e.subarray(r,a));for(var i="";r<a;){var c=e[r++];if(!(c&128)){i+=String.fromCharCode(c);continue}var d=e[r++]&63;if((c&224)==192){i+=String.fromCharCode((c&31)<<6|d);continue}var m=e[r++]&63;if((c&240)==224?c=(c&15)<<12|d<<6|m:c=(c&7)<<18|d<<12|m<<6|e[r++]&63,c<65536)i+=String.fromCharCode(c);else{var p=c-65536;i+=String.fromCharCode(55296|p>>10,56320|p&1023)}}return i},xe=(e,r)=>e?wr($,e,r):"",yi=(e,r,t,n)=>M(`Assertion failed: ${xe(e)}, at: `+[r?xe(r):"unknown filename",t,n?xe(n):"unknown function"]),it=()=>{var e=v[+oe.varargs>>2];return oe.varargs+=4,e},br=it,te={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return r.exec(e).slice(1)},normalizeArray:(e,r)=>{for(var t=0,n=e.length-1;n>=0;n--){var a=e[n];a==="."?e.splice(n,1):a===".."?(e.splice(n,1),t++):t&&(e.splice(n,1),t--)}if(r)for(;t;t--)e.unshift("..");return e},normalize:e=>{var r=te.isAbs(e),t=e.substr(-1)==="/";return e=te.normalizeArray(e.split("/").filter(n=>!!n),!r).join("/"),!e&&!r&&(e="."),e&&t&&(e+="/"),(r?"/":"")+e},dirname:e=>{var r=te.splitPath(e),t=r[0],n=r[1];return!t&&!n?".":(n&&(n=n.substr(0,n.length-1)),t+n)},basename:e=>e&&e.match(/([^\/]+|\/)\/*$/)[1],join:(...e)=>te.normalize(e.join("/")),join2:(e,r)=>te.normalize(e+"/"+r)},Ei=()=>e=>crypto.getRandomValues(e),Pn=e=>{(Pn=Ei())(e)},kr={resolve:(...e)=>{for(var r="",t=!1,n=e.length-1;n>=-1&&!t;n--){var a=n>=0?e[n]:s.cwd();if(typeof a!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!a)return"";r=a+"/"+r,t=te.isAbs(a)}return r=te.normalizeArray(r.split("/").filter(i=>!!i),!t).join("/"),(t?"/":"")+r||"."},relative:(e,r)=>{e=kr.resolve(e).substr(1),r=kr.resolve(r).substr(1);function t(p){for(var E=0;E<p.length&&p[E]==="";E++);for(var S=p.length-1;S>=0&&p[S]==="";S--);return E>S?[]:p.slice(E,S-E+1)}for(var n=t(e.split("/")),a=t(r.split("/")),i=Math.min(n.length,a.length),c=i,d=0;d<i;d++)if(n[d]!==a[d]){c=d;break}for(var m=[],d=c;d<n.length;d++)m.push("..");return m=m.concat(a.slice(c)),m.join("/")}},zt=[],ot=e=>{for(var r=0,t=0;t<e.length;++t){var n=e.charCodeAt(t);n<=127?r++:n<=2047?r+=2:n>=55296&&n<=57343?(r+=4,++t):r+=3}return r},qt=(e,r,t,n)=>{if(!(n>0))return 0;for(var a=t,i=t+n-1,c=0;c<e.length;++c){var d=e.charCodeAt(c);if(d>=55296&&d<=57343){var m=e.charCodeAt(++c);d=65536+((d&1023)<<10)|m&1023}if(d<=127){if(t>=i)break;r[t++]=d}else if(d<=2047){if(t+1>=i)break;r[t++]=192|d>>6,r[t++]=128|d&63}else if(d<=65535){if(t+2>=i)break;r[t++]=224|d>>12,r[t++]=128|d>>6&63,r[t++]=128|d&63}else{if(t+3>=i)break;r[t++]=240|d>>18,r[t++]=128|d>>12&63,r[t++]=128|d>>6&63,r[t++]=128|d&63}}return r[t]=0,t-a};function Ht(e,r,t){var n=ot(e)+1,a=new Array(n),i=qt(e,a,0,a.length);return r&&(a.length=i),a}var wi=()=>{if(!zt.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`)),!e)return null;zt=Ht(e,!0)}return zt.shift()},dr={ttys:[],init(){},shutdown(){},register(e,r){dr.ttys[e]={input:[],output:[],ops:r},s.registerDevice(e,dr.stream_ops)},stream_ops:{open(e){var r=dr.ttys[e.node.rdev];if(!r)throw new s.ErrnoError(43);e.tty=r,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,r,t,n,a){if(!e.tty||!e.tty.ops.get_char)throw new s.ErrnoError(60);for(var i=0,c=0;c<n;c++){var d;try{d=e.tty.ops.get_char(e.tty)}catch{throw new s.ErrnoError(29)}if(d===void 0&&i===0)throw new s.ErrnoError(6);if(d==null)break;i++,r[t+c]=d}return i&&(e.node.atime=Date.now()),i},write(e,r,t,n,a){if(!e.tty||!e.tty.ops.put_char)throw new s.ErrnoError(60);try{for(var i=0;i<n;i++)e.tty.ops.put_char(e.tty,r[t+i])}catch{throw new s.ErrnoError(29)}return n&&(e.node.mtime=e.node.ctime=Date.now()),i}},default_tty_ops:{get_char(e){return wi()},put_char(e,r){r===null||r===10?(z(wr(e.output)),e.output=[]):r!=0&&e.output.push(r)},fsync(e){e.output&&e.output.length>0&&(z(wr(e.output)),e.output=[])},ioctl_tcgets(e){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(e,r,t){return 0},ioctl_tiocgwinsz(e){return[24,80]}},default_tty1_ops:{put_char(e,r){r===null||r===10?(X(wr(e.output)),e.output=[]):r!=0&&e.output.push(r)},fsync(e){e.output&&e.output.length>0&&(X(wr(e.output)),e.output=[])}}},Rn=e=>{M()},H={ops_table:null,mount(e){return H.createNode(null,"/",16895,0)},createNode(e,r,t,n){if(s.isBlkdev(t)||s.isFIFO(t))throw new s.ErrnoError(63);H.ops_table||(H.ops_table={dir:{node:{getattr:H.node_ops.getattr,setattr:H.node_ops.setattr,lookup:H.node_ops.lookup,mknod:H.node_ops.mknod,rename:H.node_ops.rename,unlink:H.node_ops.unlink,rmdir:H.node_ops.rmdir,readdir:H.node_ops.readdir,symlink:H.node_ops.symlink},stream:{llseek:H.stream_ops.llseek}},file:{node:{getattr:H.node_ops.getattr,setattr:H.node_ops.setattr},stream:{llseek:H.stream_ops.llseek,read:H.stream_ops.read,write:H.stream_ops.write,allocate:H.stream_ops.allocate,mmap:H.stream_ops.mmap,msync:H.stream_ops.msync}},link:{node:{getattr:H.node_ops.getattr,setattr:H.node_ops.setattr,readlink:H.node_ops.readlink},stream:{}},chrdev:{node:{getattr:H.node_ops.getattr,setattr:H.node_ops.setattr},stream:s.chrdev_stream_ops}});var a=s.createNode(e,r,t,n);return s.isDir(a.mode)?(a.node_ops=H.ops_table.dir.node,a.stream_ops=H.ops_table.dir.stream,a.contents={}):s.isFile(a.mode)?(a.node_ops=H.ops_table.file.node,a.stream_ops=H.ops_table.file.stream,a.usedBytes=0,a.contents=null):s.isLink(a.mode)?(a.node_ops=H.ops_table.link.node,a.stream_ops=H.ops_table.link.stream):s.isChrdev(a.mode)&&(a.node_ops=H.ops_table.chrdev.node,a.stream_ops=H.ops_table.chrdev.stream),a.atime=a.mtime=a.ctime=Date.now(),e&&(e.contents[r]=a,e.atime=e.mtime=e.ctime=a.atime),a},getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage(e,r){var t=e.contents?e.contents.length:0;if(!(t>=r)){var n=1024*1024;r=Math.max(r,t*(t<n?2:1.125)>>>0),t!=0&&(r=Math.max(r,256));var a=e.contents;e.contents=new Uint8Array(r),e.usedBytes>0&&e.contents.set(a.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,r){if(e.usedBytes!=r)if(r==0)e.contents=null,e.usedBytes=0;else{var t=e.contents;e.contents=new Uint8Array(r),t&&e.contents.set(t.subarray(0,Math.min(r,e.usedBytes))),e.usedBytes=r}},node_ops:{getattr(e){var r={};return r.dev=s.isChrdev(e.mode)?e.id:1,r.ino=e.id,r.mode=e.mode,r.nlink=1,r.uid=0,r.gid=0,r.rdev=e.rdev,s.isDir(e.mode)?r.size=4096:s.isFile(e.mode)?r.size=e.usedBytes:s.isLink(e.mode)?r.size=e.link.length:r.size=0,r.atime=new Date(e.atime),r.mtime=new Date(e.mtime),r.ctime=new Date(e.ctime),r.blksize=4096,r.blocks=Math.ceil(r.size/r.blksize),r},setattr(e,r){for(const t of["mode","atime","mtime","ctime"])r[t]!=null&&(e[t]=r[t]);r.size!==void 0&&H.resizeFileStorage(e,r.size)},lookup(e,r){throw H.doesNotExistError},mknod(e,r,t,n){return H.createNode(e,r,t,n)},rename(e,r,t){var n;try{n=s.lookupNode(r,t)}catch{}if(n){if(s.isDir(e.mode))for(var a in n.contents)throw new s.ErrnoError(55);s.hashRemoveNode(n)}delete e.parent.contents[e.name],r.contents[t]=e,e.name=t,r.ctime=r.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,r){delete e.contents[r],e.ctime=e.mtime=Date.now()},rmdir(e,r){var t=s.lookupNode(e,r);for(var n in t.contents)throw new s.ErrnoError(55);delete e.contents[r],e.ctime=e.mtime=Date.now()},readdir(e){return[".","..",...Object.keys(e.contents)]},symlink(e,r,t){var n=H.createNode(e,r,41471,0);return n.link=t,n},readlink(e){if(!s.isLink(e.mode))throw new s.ErrnoError(28);return e.link}},stream_ops:{read(e,r,t,n,a){var i=e.node.contents;if(a>=e.node.usedBytes)return 0;var c=Math.min(e.node.usedBytes-a,n);if(c>8&&i.subarray)r.set(i.subarray(a,a+c),t);else for(var d=0;d<c;d++)r[t+d]=i[a+d];return c},write(e,r,t,n,a,i){if(!n)return 0;var c=e.node;if(c.mtime=c.ctime=Date.now(),r.subarray&&(!c.contents||c.contents.subarray)){if(i)return c.contents=r.subarray(t,t+n),c.usedBytes=n,n;if(c.usedBytes===0&&a===0)return c.contents=r.slice(t,t+n),c.usedBytes=n,n;if(a+n<=c.usedBytes)return c.contents.set(r.subarray(t,t+n),a),n}if(H.expandFileStorage(c,a+n),c.contents.subarray&&r.subarray)c.contents.set(r.subarray(t,t+n),a);else for(var d=0;d<n;d++)c.contents[a+d]=r[t+d];return c.usedBytes=Math.max(c.usedBytes,a+n),n},llseek(e,r,t){var n=r;if(t===1?n+=e.position:t===2&&s.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new s.ErrnoError(28);return n},allocate(e,r,t){H.expandFileStorage(e.node,r+t),e.node.usedBytes=Math.max(e.node.usedBytes,r+t)},mmap(e,r,t,n,a){if(!s.isFile(e.node.mode))throw new s.ErrnoError(43);var i,c,d=e.node.contents;if(!(a&2)&&d&&d.buffer===N.buffer)c=!1,i=d.byteOffset;else{if(c=!0,i=Rn(),!i)throw new s.ErrnoError(48);d&&((t>0||t+r<d.length)&&(d.subarray?d=d.subarray(t,t+r):d=Array.prototype.slice.call(d,t,t+r)),N.set(d,i))}return{ptr:i,allocated:c}},msync(e,r,t,n,a){return H.stream_ops.write(e,r,0,n,t,!1),0}}},bi=async e=>{var r=await T(e);return new Uint8Array(r)},Bn=(e,r,t,n,a,i)=>{s.createDataFile(e,r,t,n,a,i)},jt=u.preloadPlugins||[],ki=(e,r,t,n)=>{typeof R<"u"&&R.init();var a=!1;return jt.forEach(i=>{a||i.canHandle(r)&&(i.handle(e,r,t,n),a=!0)}),a},Mn=(e,r,t,n,a,i,c,d,m,p)=>{var E=r?kr.resolve(te.join2(e,r)):e;function S(O){function C(D){p==null||p(),d||Bn(e,r,D,n,a,m),i==null||i(),pr()}ki(O,E,C,()=>{c==null||c(),pr()})||C(O)}Pr(),typeof t=="string"?bi(t).then(S,c):S(t)},xi=e=>{var r={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},t=r[e];if(typeof t>"u")throw new Error(`Unknown file open mode: ${e}`);return t},Xt=(e,r)=>{var t=0;return e&&(t|=365),r&&(t|=146),t},J={dbs:{},indexedDB:()=>{if(typeof indexedDB<"u")return indexedDB;var e=null;return typeof window=="object"&&(e=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),e},DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",queuePersist:e=>{function r(){e.idbPersistState==="again"?t():e.idbPersistState=0}function t(){e.idbPersistState="idb",J.syncfs(e,!1,r)}e.idbPersistState?e.idbPersistState==="idb"&&(e.idbPersistState="again"):e.idbPersistState=setTimeout(t,0)},mount:e=>{var n;var r=H.mount(e);if((n=e==null?void 0:e.opts)!=null&&n.autoPersist){r.idbPersistState=0;var t=r.node_ops;r.node_ops=Object.assign({},r.node_ops),r.node_ops.mknod=(a,i,c,d)=>{var m=t.mknod(a,i,c,d);return m.node_ops=r.node_ops,m.idbfs_mount=r.mount,m.memfs_stream_ops=m.stream_ops,m.stream_ops=Object.assign({},m.stream_ops),m.stream_ops.write=(p,E,S,O,C,D)=>(p.node.isModified=!0,m.memfs_stream_ops.write(p,E,S,O,C,D)),m.stream_ops.close=p=>{var E=p.node;if(E.isModified&&(J.queuePersist(E.idbfs_mount),E.isModified=!1),E.memfs_stream_ops.close)return E.memfs_stream_ops.close(p)},m},r.node_ops.mkdir=(...a)=>(J.queuePersist(r.mount),t.mkdir(...a)),r.node_ops.rmdir=(...a)=>(J.queuePersist(r.mount),t.rmdir(...a)),r.node_ops.symlink=(...a)=>(J.queuePersist(r.mount),t.symlink(...a)),r.node_ops.unlink=(...a)=>(J.queuePersist(r.mount),t.unlink(...a)),r.node_ops.rename=(...a)=>(J.queuePersist(r.mount),t.rename(...a))}return r},syncfs:(e,r,t)=>{J.getLocalSet(e,(n,a)=>{if(n)return t(n);J.getRemoteSet(e,(i,c)=>{if(i)return t(i);var d=r?c:a,m=r?a:c;J.reconcile(d,m,t)})})},quit:()=>{Object.values(J.dbs).forEach(e=>e.close()),J.dbs={}},getDB:(e,r)=>{var t=J.dbs[e];if(t)return r(null,t);var n;try{n=J.indexedDB().open(e,J.DB_VERSION)}catch(a){return r(a)}if(!n)return r("Unable to connect to IndexedDB");n.onupgradeneeded=a=>{var i=a.target.result,c=a.target.transaction,d;i.objectStoreNames.contains(J.DB_STORE_NAME)?d=c.objectStore(J.DB_STORE_NAME):d=i.createObjectStore(J.DB_STORE_NAME),d.indexNames.contains("timestamp")||d.createIndex("timestamp","timestamp",{unique:!1})},n.onsuccess=()=>{t=n.result,J.dbs[e]=t,r(null,t)},n.onerror=a=>{r(a.target.error),a.preventDefault()}},getLocalSet:(e,r)=>{var t={};function n(m){return m!=="."&&m!==".."}function a(m){return p=>te.join2(m,p)}for(var i=s.readdir(e.mountpoint).filter(n).map(a(e.mountpoint));i.length;){var c=i.pop(),d;try{d=s.stat(c)}catch(m){return r(m)}s.isDir(d.mode)&&i.push(...s.readdir(c).filter(n).map(a(c))),t[c]={timestamp:d.mtime}}return r(null,{type:"local",entries:t})},getRemoteSet:(e,r)=>{var t={};J.getDB(e.mountpoint,(n,a)=>{if(n)return r(n);try{var i=a.transaction([J.DB_STORE_NAME],"readonly");i.onerror=m=>{r(m.target.error),m.preventDefault()};var c=i.objectStore(J.DB_STORE_NAME),d=c.index("timestamp");d.openKeyCursor().onsuccess=m=>{var p=m.target.result;if(!p)return r(null,{type:"remote",db:a,entries:t});t[p.primaryKey]={timestamp:p.key},p.continue()}}catch(m){return r(m)}})},loadLocalEntry:(e,r)=>{var t,n;try{var a=s.lookupPath(e);n=a.node,t=s.stat(e)}catch(i){return r(i)}return s.isDir(t.mode)?r(null,{timestamp:t.mtime,mode:t.mode}):s.isFile(t.mode)?(n.contents=H.getFileDataAsTypedArray(n),r(null,{timestamp:t.mtime,mode:t.mode,contents:n.contents})):r(new Error("node type not supported"))},storeLocalEntry:(e,r,t)=>{try{if(s.isDir(r.mode))s.mkdirTree(e,r.mode);else if(s.isFile(r.mode))s.writeFile(e,r.contents,{canOwn:!0});else return t(new Error("node type not supported"));s.chmod(e,r.mode),s.utime(e,r.timestamp,r.timestamp)}catch(n){return t(n)}t(null)},removeLocalEntry:(e,r)=>{try{var t=s.stat(e);s.isDir(t.mode)?s.rmdir(e):s.isFile(t.mode)&&s.unlink(e)}catch(n){return r(n)}r(null)},loadRemoteEntry:(e,r,t)=>{var n=e.get(r);n.onsuccess=a=>t(null,a.target.result),n.onerror=a=>{t(a.target.error),a.preventDefault()}},storeRemoteEntry:(e,r,t,n)=>{try{var a=e.put(t,r)}catch(i){n(i);return}a.onsuccess=i=>n(),a.onerror=i=>{n(i.target.error),i.preventDefault()}},removeRemoteEntry:(e,r,t)=>{var n=e.delete(r);n.onsuccess=a=>t(),n.onerror=a=>{t(a.target.error),a.preventDefault()}},reconcile:(e,r,t)=>{var n=0,a=[];Object.keys(e.entries).forEach(S=>{var O=e.entries[S],C=r.entries[S];(!C||O.timestamp.getTime()!=C.timestamp.getTime())&&(a.push(S),n++)});var i=[];if(Object.keys(r.entries).forEach(S=>{e.entries[S]||(i.push(S),n++)}),!n)return t(null);var c=!1,d=e.type==="remote"?e.db:r.db,m=d.transaction([J.DB_STORE_NAME],"readwrite"),p=m.objectStore(J.DB_STORE_NAME);function E(S){if(S&&!c)return c=!0,t(S)}m.onerror=m.onabort=S=>{E(S.target.error),S.preventDefault()},m.oncomplete=S=>{c||t(null)},a.sort().forEach(S=>{r.type==="local"?J.loadRemoteEntry(p,S,(O,C)=>{if(O)return E(O);J.storeLocalEntry(S,C,E)}):J.loadLocalEntry(S,(O,C)=>{if(O)return E(O);J.storeRemoteEntry(p,S,C,E)})}),i.sort().reverse().forEach(S=>{r.type==="local"?J.removeLocalEntry(S,E):J.removeRemoteEntry(p,S,E)})}},s={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class{constructor(e){Oe(this,"name","ErrnoError");this.errno=e}},filesystems:null,syncFSRequests:0,readFiles:{},FSStream:class{constructor(){Oe(this,"shared",{})}get object(){return this.node}set object(e){this.node=e}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{constructor(e,r,t,n){Oe(this,"node_ops",{});Oe(this,"stream_ops",{});Oe(this,"readMode",365);Oe(this,"writeMode",146);Oe(this,"mounted",null);e||(e=this),this.parent=e,this.mount=e.mount,this.id=s.nextInode++,this.name=r,this.mode=t,this.rdev=n,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return s.isDir(this.mode)}get isDevice(){return s.isChrdev(this.mode)}},lookupPath(e,r={}){if(!e)throw new s.ErrnoError(44);r.follow_mount??(r.follow_mount=!0),te.isAbs(e)||(e=s.cwd()+"/"+e);e:for(var t=0;t<40;t++){for(var n=e.split("/").filter(p=>!!p),a=s.root,i="/",c=0;c<n.length;c++){var d=c===n.length-1;if(d&&r.parent)break;if(n[c]!=="."){if(n[c]===".."){i=te.dirname(i),a=a.parent;continue}i=te.join2(i,n[c]);try{a=s.lookupNode(a,n[c])}catch(p){if((p==null?void 0:p.errno)===44&&d&&r.noent_okay)return{path:i};throw p}if(s.isMountpoint(a)&&(!d||r.follow_mount)&&(a=a.mounted.root),s.isLink(a.mode)&&(!d||r.follow)){if(!a.node_ops.readlink)throw new s.ErrnoError(52);var m=a.node_ops.readlink(a);te.isAbs(m)||(m=te.dirname(i)+"/"+m),e=m+"/"+n.slice(c+1).join("/");continue e}}}return{path:i,node:a}}throw new s.ErrnoError(32)},getPath(e){for(var r;;){if(s.isRoot(e)){var t=e.mount.mountpoint;return r?t[t.length-1]!=="/"?`${t}/${r}`:t+r:t}r=r?`${e.name}/${r}`:e.name,e=e.parent}},hashName(e,r){for(var t=0,n=0;n<r.length;n++)t=(t<<5)-t+r.charCodeAt(n)|0;return(e+t>>>0)%s.nameTable.length},hashAddNode(e){var r=s.hashName(e.parent.id,e.name);e.name_next=s.nameTable[r],s.nameTable[r]=e},hashRemoveNode(e){var r=s.hashName(e.parent.id,e.name);if(s.nameTable[r]===e)s.nameTable[r]=e.name_next;else for(var t=s.nameTable[r];t;){if(t.name_next===e){t.name_next=e.name_next;break}t=t.name_next}},lookupNode(e,r){var t=s.mayLookup(e);if(t)throw new s.ErrnoError(t);for(var n=s.hashName(e.id,r),a=s.nameTable[n];a;a=a.name_next){var i=a.name;if(a.parent.id===e.id&&i===r)return a}return s.lookup(e,r)},createNode(e,r,t,n){var a=new s.FSNode(e,r,t,n);return s.hashAddNode(a),a},destroyNode(e){s.hashRemoveNode(e)},isRoot(e){return e===e.parent},isMountpoint(e){return!!e.mounted},isFile(e){return(e&61440)===32768},isDir(e){return(e&61440)===16384},isLink(e){return(e&61440)===40960},isChrdev(e){return(e&61440)===8192},isBlkdev(e){return(e&61440)===24576},isFIFO(e){return(e&61440)===4096},isSocket(e){return(e&49152)===49152},flagsToPermissionString(e){var r=["r","w","rw"][e&3];return e&512&&(r+="w"),r},nodePermissions(e,r){return s.ignorePermissions?0:r.includes("r")&&!(e.mode&292)||r.includes("w")&&!(e.mode&146)||r.includes("x")&&!(e.mode&73)?2:0},mayLookup(e){if(!s.isDir(e.mode))return 54;var r=s.nodePermissions(e,"x");return r||(e.node_ops.lookup?0:2)},mayCreate(e,r){if(!s.isDir(e.mode))return 54;try{var t=s.lookupNode(e,r);return 20}catch{}return s.nodePermissions(e,"wx")},mayDelete(e,r,t){var n;try{n=s.lookupNode(e,r)}catch(i){return i.errno}var a=s.nodePermissions(e,"wx");if(a)return a;if(t){if(!s.isDir(n.mode))return 54;if(s.isRoot(n)||s.getPath(n)===s.cwd())return 10}else if(s.isDir(n.mode))return 31;return 0},mayOpen(e,r){return e?s.isLink(e.mode)?32:s.isDir(e.mode)&&(s.flagsToPermissionString(r)!=="r"||r&576)?31:s.nodePermissions(e,s.flagsToPermissionString(r)):44},checkOpExists(e,r){if(!e)throw new s.ErrnoError(r);return e},MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=s.MAX_OPEN_FDS;e++)if(!s.streams[e])return e;throw new s.ErrnoError(33)},getStreamChecked(e){var r=s.getStream(e);if(!r)throw new s.ErrnoError(8);return r},getStream:e=>s.streams[e],createStream(e,r=-1){return e=Object.assign(new s.FSStream,e),r==-1&&(r=s.nextfd()),e.fd=r,s.streams[r]=e,e},closeStream(e){s.streams[e]=null},dupStream(e,r=-1){var n,a;var t=s.createStream(e,r);return(a=(n=t.stream_ops)==null?void 0:n.dup)==null||a.call(n,t),t},chrdev_stream_ops:{open(e){var t,n;var r=s.getDevice(e.node.rdev);e.stream_ops=r.stream_ops,(n=(t=e.stream_ops).open)==null||n.call(t,e)},llseek(){throw new s.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,r)=>e<<8|r,registerDevice(e,r){s.devices[e]={stream_ops:r}},getDevice:e=>s.devices[e],getMounts(e){for(var r=[],t=[e];t.length;){var n=t.pop();r.push(n),t.push(...n.mounts)}return r},syncfs(e,r){typeof e=="function"&&(r=e,e=!1),s.syncFSRequests++,s.syncFSRequests>1&&X(`warning: ${s.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var t=s.getMounts(s.root.mount),n=0;function a(c){return s.syncFSRequests--,r(c)}function i(c){if(c)return i.errored?void 0:(i.errored=!0,a(c));++n>=t.length&&a(null)}t.forEach(c=>{if(!c.type.syncfs)return i(null);c.type.syncfs(c,e,i)})},mount(e,r,t){var n=t==="/",a=!t,i;if(n&&s.root)throw new s.ErrnoError(10);if(!n&&!a){var c=s.lookupPath(t,{follow_mount:!1});if(t=c.path,i=c.node,s.isMountpoint(i))throw new s.ErrnoError(10);if(!s.isDir(i.mode))throw new s.ErrnoError(54)}var d={type:e,opts:r,mountpoint:t,mounts:[]},m=e.mount(d);return m.mount=d,d.root=m,n?s.root=m:i&&(i.mounted=d,i.mount&&i.mount.mounts.push(d)),m},unmount(e){var r=s.lookupPath(e,{follow_mount:!1});if(!s.isMountpoint(r.node))throw new s.ErrnoError(28);var t=r.node,n=t.mounted,a=s.getMounts(n);Object.keys(s.nameTable).forEach(c=>{for(var d=s.nameTable[c];d;){var m=d.name_next;a.includes(d.mount)&&s.destroyNode(d),d=m}}),t.mounted=null;var i=t.mount.mounts.indexOf(n);t.mount.mounts.splice(i,1)},lookup(e,r){return e.node_ops.lookup(e,r)},mknod(e,r,t){var n=s.lookupPath(e,{parent:!0}),a=n.node,i=te.basename(e);if(!i)throw new s.ErrnoError(28);if(i==="."||i==="..")throw new s.ErrnoError(20);var c=s.mayCreate(a,i);if(c)throw new s.ErrnoError(c);if(!a.node_ops.mknod)throw new s.ErrnoError(63);return a.node_ops.mknod(a,i,r,t)},statfs(e){return s.statfsNode(s.lookupPath(e,{follow:!0}).node)},statfsStream(e){return s.statfsNode(e.node)},statfsNode(e){var r={bsize:4096,frsize:4096,blocks:1e6,bfree:5e5,bavail:5e5,files:s.nextInode,ffree:s.nextInode-1,fsid:42,flags:2,namelen:255};return e.node_ops.statfs&&Object.assign(r,e.node_ops.statfs(e.mount.opts.root)),r},create(e,r=438){return r&=4095,r|=32768,s.mknod(e,r,0)},mkdir(e,r=511){return r&=1023,r|=16384,s.mknod(e,r,0)},mkdirTree(e,r){for(var t=e.split("/"),n="",a=0;a<t.length;++a)if(t[a]){n+="/"+t[a];try{s.mkdir(n,r)}catch(i){if(i.errno!=20)throw i}}},mkdev(e,r,t){return typeof t>"u"&&(t=r,r=438),r|=8192,s.mknod(e,r,t)},symlink(e,r){if(!kr.resolve(e))throw new s.ErrnoError(44);var t=s.lookupPath(r,{parent:!0}),n=t.node;if(!n)throw new s.ErrnoError(44);var a=te.basename(r),i=s.mayCreate(n,a);if(i)throw new s.ErrnoError(i);if(!n.node_ops.symlink)throw new s.ErrnoError(63);return n.node_ops.symlink(n,a,e)},rename(e,r){var t=te.dirname(e),n=te.dirname(r),a=te.basename(e),i=te.basename(r),c,d,m;if(c=s.lookupPath(e,{parent:!0}),d=c.node,c=s.lookupPath(r,{parent:!0}),m=c.node,!d||!m)throw new s.ErrnoError(44);if(d.mount!==m.mount)throw new s.ErrnoError(75);var p=s.lookupNode(d,a),E=kr.relative(e,n);if(E.charAt(0)!==".")throw new s.ErrnoError(28);if(E=kr.relative(r,t),E.charAt(0)!==".")throw new s.ErrnoError(55);var S;try{S=s.lookupNode(m,i)}catch{}if(p!==S){var O=s.isDir(p.mode),C=s.mayDelete(d,a,O);if(C)throw new s.ErrnoError(C);if(C=S?s.mayDelete(m,i,O):s.mayCreate(m,i),C)throw new s.ErrnoError(C);if(!d.node_ops.rename)throw new s.ErrnoError(63);if(s.isMountpoint(p)||S&&s.isMountpoint(S))throw new s.ErrnoError(10);if(m!==d&&(C=s.nodePermissions(d,"w"),C))throw new s.ErrnoError(C);s.hashRemoveNode(p);try{d.node_ops.rename(p,m,i),p.parent=m}catch(D){throw D}finally{s.hashAddNode(p)}}},rmdir(e){var r=s.lookupPath(e,{parent:!0}),t=r.node,n=te.basename(e),a=s.lookupNode(t,n),i=s.mayDelete(t,n,!0);if(i)throw new s.ErrnoError(i);if(!t.node_ops.rmdir)throw new s.ErrnoError(63);if(s.isMountpoint(a))throw new s.ErrnoError(10);t.node_ops.rmdir(t,n),s.destroyNode(a)},readdir(e){var r=s.lookupPath(e,{follow:!0}),t=r.node,n=s.checkOpExists(t.node_ops.readdir,54);return n(t)},unlink(e){var r=s.lookupPath(e,{parent:!0}),t=r.node;if(!t)throw new s.ErrnoError(44);var n=te.basename(e),a=s.lookupNode(t,n),i=s.mayDelete(t,n,!1);if(i)throw new s.ErrnoError(i);if(!t.node_ops.unlink)throw new s.ErrnoError(63);if(s.isMountpoint(a))throw new s.ErrnoError(10);t.node_ops.unlink(t,n),s.destroyNode(a)},readlink(e){var r=s.lookupPath(e),t=r.node;if(!t)throw new s.ErrnoError(44);if(!t.node_ops.readlink)throw new s.ErrnoError(28);return t.node_ops.readlink(t)},stat(e,r){var t=s.lookupPath(e,{follow:!r}),n=t.node,a=s.checkOpExists(n.node_ops.getattr,63);return a(n)},lstat(e){return s.stat(e,!0)},chmod(e,r,t){var n;if(typeof e=="string"){var a=s.lookupPath(e,{follow:!t});n=a.node}else n=e;var i=s.checkOpExists(n.node_ops.setattr,63);i(n,{mode:r&4095|n.mode&-4096,ctime:Date.now(),dontFollow:t})},lchmod(e,r){s.chmod(e,r,!0)},fchmod(e,r){var t=s.getStreamChecked(e);s.chmod(t.node,r)},chown(e,r,t,n){var a;if(typeof e=="string"){var i=s.lookupPath(e,{follow:!n});a=i.node}else a=e;var c=s.checkOpExists(a.node_ops.setattr,63);c(a,{timestamp:Date.now(),dontFollow:n})},lchown(e,r,t){s.chown(e,r,t,!0)},fchown(e,r,t){var n=s.getStreamChecked(e);s.chown(n.node,r,t)},truncate(e,r){if(r<0)throw new s.ErrnoError(28);var t;if(typeof e=="string"){var n=s.lookupPath(e,{follow:!0});t=n.node}else t=e;if(s.isDir(t.mode))throw new s.ErrnoError(31);if(!s.isFile(t.mode))throw new s.ErrnoError(28);var a=s.nodePermissions(t,"w");if(a)throw new s.ErrnoError(a);var i=s.checkOpExists(t.node_ops.setattr,63);i(t,{size:r,timestamp:Date.now()})},ftruncate(e,r){var t=s.getStreamChecked(e);if(!(t.flags&2097155))throw new s.ErrnoError(28);s.truncate(t.node,r)},utime(e,r,t){var n=s.lookupPath(e,{follow:!0}),a=n.node,i=s.checkOpExists(a.node_ops.setattr,63);i(a,{atime:r,mtime:t})},open(e,r,t=438){if(e==="")throw new s.ErrnoError(44);r=typeof r=="string"?xi(r):r,r&64?t=t&4095|32768:t=0;var n,a;if(typeof e=="object")n=e;else{a=e.endsWith("/");var i=s.lookupPath(e,{follow:!(r&131072),noent_okay:!0});n=i.node,e=i.path}var c=!1;if(r&64)if(n){if(r&128)throw new s.ErrnoError(20)}else{if(a)throw new s.ErrnoError(31);n=s.mknod(e,t|511,0),c=!0}if(!n)throw new s.ErrnoError(44);if(s.isChrdev(n.mode)&&(r&=-513),r&65536&&!s.isDir(n.mode))throw new s.ErrnoError(54);if(!c){var d=s.mayOpen(n,r);if(d)throw new s.ErrnoError(d)}r&512&&!c&&s.truncate(n,0),r&=-131713;var m=s.createStream({node:n,path:s.getPath(n),flags:r,seekable:!0,position:0,stream_ops:n.stream_ops,ungotten:[],error:!1});return m.stream_ops.open&&m.stream_ops.open(m),c&&s.chmod(n,t&511),u.logReadFiles&&!(r&1)&&(e in s.readFiles||(s.readFiles[e]=1)),m},close(e){if(s.isClosed(e))throw new s.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(r){throw r}finally{s.closeStream(e.fd)}e.fd=null},isClosed(e){return e.fd===null},llseek(e,r,t){if(s.isClosed(e))throw new s.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new s.ErrnoError(70);if(t!=0&&t!=1&&t!=2)throw new s.ErrnoError(28);return e.position=e.stream_ops.llseek(e,r,t),e.ungotten=[],e.position},read(e,r,t,n,a){if(n<0||a<0)throw new s.ErrnoError(28);if(s.isClosed(e))throw new s.ErrnoError(8);if((e.flags&2097155)===1)throw new s.ErrnoError(8);if(s.isDir(e.node.mode))throw new s.ErrnoError(31);if(!e.stream_ops.read)throw new s.ErrnoError(28);var i=typeof a<"u";if(!i)a=e.position;else if(!e.seekable)throw new s.ErrnoError(70);var c=e.stream_ops.read(e,r,t,n,a);return i||(e.position+=c),c},write(e,r,t,n,a,i){if(n<0||a<0)throw new s.ErrnoError(28);if(s.isClosed(e))throw new s.ErrnoError(8);if(!(e.flags&2097155))throw new s.ErrnoError(8);if(s.isDir(e.node.mode))throw new s.ErrnoError(31);if(!e.stream_ops.write)throw new s.ErrnoError(28);e.seekable&&e.flags&1024&&s.llseek(e,0,2);var c=typeof a<"u";if(!c)a=e.position;else if(!e.seekable)throw new s.ErrnoError(70);var d=e.stream_ops.write(e,r,t,n,a,i);return c||(e.position+=d),d},allocate(e,r,t){if(s.isClosed(e))throw new s.ErrnoError(8);if(r<0||t<=0)throw new s.ErrnoError(28);if(!(e.flags&2097155))throw new s.ErrnoError(8);if(!s.isFile(e.node.mode)&&!s.isDir(e.node.mode))throw new s.ErrnoError(43);if(!e.stream_ops.allocate)throw new s.ErrnoError(138);e.stream_ops.allocate(e,r,t)},mmap(e,r,t,n,a){if(n&2&&!(a&2)&&(e.flags&2097155)!==2)throw new s.ErrnoError(2);if((e.flags&2097155)===1)throw new s.ErrnoError(2);if(!e.stream_ops.mmap)throw new s.ErrnoError(43);if(!r)throw new s.ErrnoError(28);return e.stream_ops.mmap(e,r,t,n,a)},msync(e,r,t,n,a){return e.stream_ops.msync?e.stream_ops.msync(e,r,t,n,a):0},ioctl(e,r,t){if(!e.stream_ops.ioctl)throw new s.ErrnoError(59);return e.stream_ops.ioctl(e,r,t)},readFile(e,r={}){if(r.flags=r.flags||0,r.encoding=r.encoding||"binary",r.encoding!=="utf8"&&r.encoding!=="binary")throw new Error(`Invalid encoding type "${r.encoding}"`);var t,n=s.open(e,r.flags),a=s.stat(e),i=a.size,c=new Uint8Array(i);return s.read(n,c,0,i,0),r.encoding==="utf8"?t=wr(c):r.encoding==="binary"&&(t=c),s.close(n),t},writeFile(e,r,t={}){t.flags=t.flags||577;var n=s.open(e,t.flags,t.mode);if(typeof r=="string"){var a=new Uint8Array(ot(r)+1),i=qt(r,a,0,a.length);s.write(n,a,0,i,void 0,t.canOwn)}else if(ArrayBuffer.isView(r))s.write(n,r,0,r.byteLength,void 0,t.canOwn);else throw new Error("Unsupported data type");s.close(n)},cwd:()=>s.currentPath,chdir(e){var r=s.lookupPath(e,{follow:!0});if(r.node===null)throw new s.ErrnoError(44);if(!s.isDir(r.node.mode))throw new s.ErrnoError(54);var t=s.nodePermissions(r.node,"x");if(t)throw new s.ErrnoError(t);s.currentPath=r.path},createDefaultDirectories(){s.mkdir("/tmp"),s.mkdir("/home"),s.mkdir("/home/web_user")},createDefaultDevices(){s.mkdir("/dev"),s.registerDevice(s.makedev(1,3),{read:()=>0,write:(n,a,i,c,d)=>c,llseek:()=>0}),s.mkdev("/dev/null",s.makedev(1,3)),dr.register(s.makedev(5,0),dr.default_tty_ops),dr.register(s.makedev(6,0),dr.default_tty1_ops),s.mkdev("/dev/tty",s.makedev(5,0)),s.mkdev("/dev/tty1",s.makedev(6,0));var e=new Uint8Array(1024),r=0,t=()=>(r===0&&(Pn(e),r=e.byteLength),e[--r]);s.createDevice("/dev","random",t),s.createDevice("/dev","urandom",t),s.mkdir("/dev/shm"),s.mkdir("/dev/shm/tmp")},createSpecialDirectories(){s.mkdir("/proc");var e=s.mkdir("/proc/self");s.mkdir("/proc/self/fd"),s.mount({mount(){var r=s.createNode(e,"fd",16895,73);return r.stream_ops={llseek:H.stream_ops.llseek},r.node_ops={lookup(t,n){var a=+n,i=s.getStreamChecked(a),c={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>i.path},id:a+1};return c.parent=c,c},readdir(){return Array.from(s.streams.entries()).filter(([t,n])=>n).map(([t,n])=>t.toString())}},r}},{},"/proc/self/fd")},createStandardStreams(e,r,t){e?s.createDevice("/dev","stdin",e):s.symlink("/dev/tty","/dev/stdin"),r?s.createDevice("/dev","stdout",null,r):s.symlink("/dev/tty","/dev/stdout"),t?s.createDevice("/dev","stderr",null,t):s.symlink("/dev/tty1","/dev/stderr"),s.open("/dev/stdin",0),s.open("/dev/stdout",1),s.open("/dev/stderr",1)},staticInit(){s.nameTable=new Array(4096),s.mount(H,{},"/"),s.createDefaultDirectories(),s.createDefaultDevices(),s.createSpecialDirectories(),s.filesystems={MEMFS:H,IDBFS:J}},init(e,r,t){s.initialized=!0,e??(e=u.stdin),r??(r=u.stdout),t??(t=u.stderr),s.createStandardStreams(e,r,t)},quit(){s.initialized=!1;for(var e=0;e<s.streams.length;e++){var r=s.streams[e];r&&s.close(r)}},findObject(e,r){var t=s.analyzePath(e,r);return t.exists?t.object:null},analyzePath(e,r){try{var t=s.lookupPath(e,{follow:!r});e=t.path}catch{}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var t=s.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=t.path,n.parentObject=t.node,n.name=te.basename(e),t=s.lookupPath(e,{follow:!r}),n.exists=!0,n.path=t.path,n.object=t.node,n.name=t.node.name,n.isRoot=t.path==="/"}catch(a){n.error=a.errno}return n},createPath(e,r,t,n){e=typeof e=="string"?e:s.getPath(e);for(var a=r.split("/").reverse();a.length;){var i=a.pop();if(i){var c=te.join2(e,i);try{s.mkdir(c)}catch{}e=c}}return c},createFile(e,r,t,n,a){var i=te.join2(typeof e=="string"?e:s.getPath(e),r),c=Xt(n,a);return s.create(i,c)},createDataFile(e,r,t,n,a,i){var c=r;e&&(e=typeof e=="string"?e:s.getPath(e),c=r?te.join2(e,r):e);var d=Xt(n,a),m=s.create(c,d);if(t){if(typeof t=="string"){for(var p=new Array(t.length),E=0,S=t.length;E<S;++E)p[E]=t.charCodeAt(E);t=p}s.chmod(m,d|146);var O=s.open(m,577);s.write(O,t,0,t.length,0,i),s.close(O),s.chmod(m,d)}},createDevice(e,r,t,n){var d;var a=te.join2(typeof e=="string"?e:s.getPath(e),r),i=Xt(!!t,!!n);(d=s.createDevice).major??(d.major=64);var c=s.makedev(s.createDevice.major++,0);return s.registerDevice(c,{open(m){m.seekable=!1},close(m){var p;(p=n==null?void 0:n.buffer)!=null&&p.length&&n(10)},read(m,p,E,S,O){for(var C=0,D=0;D<S;D++){var W;try{W=t()}catch{throw new s.ErrnoError(29)}if(W===void 0&&C===0)throw new s.ErrnoError(6);if(W==null)break;C++,p[E+D]=W}return C&&(m.node.atime=Date.now()),C},write(m,p,E,S,O){for(var C=0;C<S;C++)try{n(p[E+C])}catch{throw new s.ErrnoError(29)}return S&&(m.node.mtime=m.node.ctime=Date.now()),C}}),s.mkdev(a,i,c)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{e.contents=G(e.url),e.usedBytes=e.contents.length}catch{throw new s.ErrnoError(29)}},createLazyFile(e,r,t,n,a){class i{constructor(){Oe(this,"lengthKnown",!1);Oe(this,"chunks",[])}get(C){if(!(C>this.length-1||C<0)){var D=C%this.chunkSize,W=C/this.chunkSize|0;return this.getter(W)[D]}}setDataGetter(C){this.getter=C}cacheLength(){var C=new XMLHttpRequest;if(C.open("HEAD",t,!1),C.send(null),!(C.status>=200&&C.status<300||C.status===304))throw new Error("Couldn't load "+t+". Status: "+C.status);var D=Number(C.getResponseHeader("Content-length")),W,K=(W=C.getResponseHeader("Accept-Ranges"))&&W==="bytes",j=(W=C.getResponseHeader("Content-Encoding"))&&W==="gzip",ve=1024*1024;K||(ve=D);var le=(ye,Le)=>{if(ye>Le)throw new Error("invalid range ("+ye+", "+Le+") or no bytes requested!");if(Le>D-1)throw new Error("only "+D+" bytes available! programmer error!");var ce=new XMLHttpRequest;if(ce.open("GET",t,!1),D!==ve&&ce.setRequestHeader("Range","bytes="+ye+"-"+Le),ce.responseType="arraybuffer",ce.overrideMimeType&&ce.overrideMimeType("text/plain; charset=x-user-defined"),ce.send(null),!(ce.status>=200&&ce.status<300||ce.status===304))throw new Error("Couldn't load "+t+". Status: "+ce.status);return ce.response!==void 0?new Uint8Array(ce.response||[]):Ht(ce.responseText||"",!0)},ue=this;ue.setDataGetter(ye=>{var Le=ye*ve,ce=(ye+1)*ve-1;if(ce=Math.min(ce,D-1),typeof ue.chunks[ye]>"u"&&(ue.chunks[ye]=le(Le,ce)),typeof ue.chunks[ye]>"u")throw new Error("doXHR failed!");return ue.chunks[ye]}),(j||!D)&&(ve=D=1,D=this.getter(0).length,ve=D,z("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=D,this._chunkSize=ve,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var c,d}else var d={isDevice:!1,url:t};var m=s.createFile(e,r,d,n,a);d.contents?m.contents=d.contents:d.url&&(m.contents=null,m.url=d.url),Object.defineProperties(m,{usedBytes:{get:function(){return this.contents.length}}});var p={},E=Object.keys(m.stream_ops);E.forEach(O=>{var C=m.stream_ops[O];p[O]=(...D)=>(s.forceLoadFile(m),C(...D))});function S(O,C,D,W,K){var j=O.node.contents;if(K>=j.length)return 0;var ve=Math.min(j.length-K,W);if(j.slice)for(var le=0;le<ve;le++)C[D+le]=j[K+le];else for(var le=0;le<ve;le++)C[D+le]=j.get(K+le);return ve}return p.read=(O,C,D,W,K)=>(s.forceLoadFile(m),S(O,C,D,W,K)),p.mmap=(O,C,D,W,K)=>{s.forceLoadFile(m);var j=Rn();if(!j)throw new s.ErrnoError(48);return S(O,N,j,C,D),{ptr:j,allocated:!0}},m.stream_ops=p,m}},oe={DEFAULT_POLLMASK:5,calculateAt(e,r,t){if(te.isAbs(r))return r;var n;if(e===-100)n=s.cwd();else{var a=oe.getStreamFromFD(e);n=a.path}if(r.length==0){if(!t)throw new s.ErrnoError(44);return n}return n+"/"+r},writeStat(e,r){v[e>>2]=r.dev,v[e+4>>2]=r.mode,Z[e+8>>2]=r.nlink,v[e+12>>2]=r.uid,v[e+16>>2]=r.gid,v[e+20>>2]=r.rdev,Fe[e+24>>3]=BigInt(r.size),v[e+32>>2]=4096,v[e+36>>2]=r.blocks;var t=r.atime.getTime(),n=r.mtime.getTime(),a=r.ctime.getTime();return Fe[e+40>>3]=BigInt(Math.floor(t/1e3)),Z[e+48>>2]=t%1e3*1e3*1e3,Fe[e+56>>3]=BigInt(Math.floor(n/1e3)),Z[e+64>>2]=n%1e3*1e3*1e3,Fe[e+72>>3]=BigInt(Math.floor(a/1e3)),Z[e+80>>2]=a%1e3*1e3*1e3,Fe[e+88>>3]=BigInt(r.ino),0},writeStatFs(e,r){v[e+4>>2]=r.bsize,v[e+40>>2]=r.bsize,v[e+8>>2]=r.blocks,v[e+12>>2]=r.bfree,v[e+16>>2]=r.bavail,v[e+20>>2]=r.files,v[e+24>>2]=r.ffree,v[e+28>>2]=r.fsid,v[e+44>>2]=r.flags,v[e+36>>2]=r.namelen},doMsync(e,r,t,n,a){if(!s.isFile(r.node.mode))throw new s.ErrnoError(43);if(n&2)return 0;var i=$.slice(e,e+t);s.msync(r,i,a,t,n)},getStreamFromFD(e){var r=s.getStreamChecked(e);return r},varargs:void 0,getStr(e){var r=xe(e);return r}};function Ci(e,r,t){oe.varargs=t;try{var n=oe.getStreamFromFD(e);switch(r){case 0:{var a=it();if(a<0)return-28;for(;s.streams[a];)a++;var i;return i=s.dupStream(n,a),i.fd}case 1:case 2:return 0;case 3:return n.flags;case 4:{var a=it();return n.flags|=a,0}case 12:{var a=br(),c=0;return _e[a+c>>1]=2,0}case 13:case 14:return 0}return-28}catch(d){if(typeof s>"u"||d.name!=="ErrnoError")throw d;return-d.errno}}function Si(e,r){try{var t=oe.getStreamFromFD(e);return oe.writeStat(r,s.stat(t.path))}catch(n){if(typeof s>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Ai(e,r,t){oe.varargs=t;try{var n=oe.getStreamFromFD(e);switch(r){case 21509:return n.tty?0:-59;case 21505:{if(!n.tty)return-59;if(n.tty.ops.ioctl_tcgets){var a=n.tty.ops.ioctl_tcgets(n),i=br();v[i>>2]=a.c_iflag||0,v[i+4>>2]=a.c_oflag||0,v[i+8>>2]=a.c_cflag||0,v[i+12>>2]=a.c_lflag||0;for(var c=0;c<32;c++)N[i+c+17]=a.c_cc[c]||0;return 0}return 0}case 21510:case 21511:case 21512:return n.tty?0:-59;case 21506:case 21507:case 21508:{if(!n.tty)return-59;if(n.tty.ops.ioctl_tcsets){for(var i=br(),d=v[i>>2],m=v[i+4>>2],p=v[i+8>>2],E=v[i+12>>2],S=[],c=0;c<32;c++)S.push(N[i+c+17]);return n.tty.ops.ioctl_tcsets(n.tty,r,{c_iflag:d,c_oflag:m,c_cflag:p,c_lflag:E,c_cc:S})}return 0}case 21519:{if(!n.tty)return-59;var i=br();return v[i>>2]=0,0}case 21520:return n.tty?-28:-59;case 21531:{var i=br();return s.ioctl(n,r,i)}case 21523:{if(!n.tty)return-59;if(n.tty.ops.ioctl_tiocgwinsz){var O=n.tty.ops.ioctl_tiocgwinsz(n.tty),i=br();_e[i>>1]=O[0],_e[i+2>>1]=O[1]}return 0}case 21524:return n.tty?0:-59;case 21515:return n.tty?0:-59;default:return-28}}catch(C){if(typeof s>"u"||C.name!=="ErrnoError")throw C;return-C.errno}}function Di(e,r){try{return e=oe.getStr(e),oe.writeStat(r,s.lstat(e))}catch(t){if(typeof s>"u"||t.name!=="ErrnoError")throw t;return-t.errno}}function Fi(e,r,t,n){try{r=oe.getStr(r);var a=n&256,i=n&4096;return n=n&-6401,r=oe.calculateAt(e,r,i),oe.writeStat(t,a?s.lstat(r):s.stat(r))}catch(c){if(typeof s>"u"||c.name!=="ErrnoError")throw c;return-c.errno}}function Ti(e,r,t,n){oe.varargs=n;try{r=oe.getStr(r),r=oe.calculateAt(e,r);var a=n?it():0;return s.open(r,t,a).fd}catch(i){if(typeof s>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}function Li(e,r){try{return e=oe.getStr(e),oe.writeStat(r,s.stat(e))}catch(t){if(typeof s>"u"||t.name!=="ErrnoError")throw t;return-t.errno}}var Pi=()=>M(""),Ri=e=>e%4===0&&(e%100!==0||e%400===0),Bi=[0,31,60,91,121,152,182,213,244,274,305,335],Mi=[0,31,59,90,120,151,181,212,243,273,304,334],Oi=e=>{var r=Ri(e.getFullYear()),t=r?Bi:Mi,n=t[e.getMonth()]+e.getDate()-1;return n},Ii=9007199254740992,Gi=-9007199254740992,On=e=>e<Gi||e>Ii?NaN:Number(e);function Ni(e,r){e=On(e);var t=new Date(e*1e3);v[r>>2]=t.getSeconds(),v[r+4>>2]=t.getMinutes(),v[r+8>>2]=t.getHours(),v[r+12>>2]=t.getDate(),v[r+16>>2]=t.getMonth(),v[r+20>>2]=t.getFullYear()-1900,v[r+24>>2]=t.getDay();var n=Oi(t)|0;v[r+28>>2]=n,v[r+36>>2]=-(t.getTimezoneOffset()*60);var a=new Date(t.getFullYear(),0,1),i=new Date(t.getFullYear(),6,1).getTimezoneOffset(),c=a.getTimezoneOffset(),d=(i!=c&&t.getTimezoneOffset()==Math.min(c,i))|0;v[r+32>>2]=d}var se=(e,r,t)=>qt(e,$,r,t),Ui=(e,r,t,n)=>{var a=new Date().getFullYear(),i=new Date(a,0,1),c=new Date(a,6,1),d=i.getTimezoneOffset(),m=c.getTimezoneOffset(),p=Math.max(d,m);Z[e>>2]=p*60,v[r>>2]=+(d!=m);var E=C=>{var D=C>=0?"-":"+",W=Math.abs(C),K=String(Math.floor(W/60)).padStart(2,"0"),j=String(W%60).padStart(2,"0");return`UTC${D}${K}${j}`},S=E(d),O=E(m);m<d?(se(S,t,17),se(O,n,17)):(se(S,n,17),se(O,t,17))},Wt=()=>performance.now(),zi=()=>Date.now(),Vt=e=>{if(e instanceof Dn||e=="unwind")return me;F(1,e)},In=0,Gn=()=>Fn||In>0,qi=e=>{var r;me=e,Gn()||((r=u.onExit)==null||r.call(u,e),Q=!0),F(e,new Dn(e))},Nn=(e,r)=>{me=e,qi(e)},Yt=Nn,Un=()=>{if(!Gn())try{Yt(me)}catch(e){Vt(e)}},zn=e=>{if(!Q)try{e(),Un()}catch(r){Vt(r)}},qn=(e,r)=>setTimeout(()=>{zn(e)},r),R={useWebGL:!1,isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],preloadedImages:{},preloadedAudios:{},init(){if(R.initted)return;R.initted=!0;var e={};e.canHandle=function(i){return!u.noImageDecoding&&/\.(jpg|jpeg|png|bmp|webp)$/i.test(i)},e.handle=function(i,c,d,m){var p=new Blob([i],{type:R.getMimetype(c)});p.size!==i.length&&(p=new Blob([new Uint8Array(i).buffer],{type:R.getMimetype(c)}));var E=URL.createObjectURL(p),S=new Image;S.onload=()=>{var O=document.createElement("canvas");O.width=S.width,O.height=S.height;var C=O.getContext("2d");C.drawImage(S,0,0),R.preloadedImages[c]=O,URL.revokeObjectURL(E),d==null||d(i)},S.onerror=O=>{X(`Image ${E} could not be decoded`),m==null||m()},S.src=E},jt.push(e);var r={};r.canHandle=function(i){return!u.noAudioDecoding&&i.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},r.handle=function(i,c,d,m){var p=!1;function E(D){p||(p=!0,R.preloadedAudios[c]=D,d==null||d(i))}var S=new Blob([i],{type:R.getMimetype(c)}),O=URL.createObjectURL(S),C=new Audio;C.addEventListener("canplaythrough",()=>E(C),!1),C.onerror=function(W){if(p)return;X(`warning: browser could not fully decode audio ${c}, trying slower base64 approach`);function K(j){for(var ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",le="=",ue="",ye=0,Le=0,ce=0;ce<j.length;ce++)for(ye=ye<<8|j[ce],Le+=8;Le>=6;){var sm=ye>>Le-6&63;Le-=6,ue+=ve[sm]}return Le==2?(ue+=ve[(ye&3)<<4],ue+=le+le):Le==4&&(ue+=ve[(ye&15)<<2],ue+=le),ue}C.src="data:audio/x-"+c.substr(-3)+";base64,"+K(i),E(C)},C.src=O,qn(()=>{E(C)},1e4)},jt.push(r);function t(){R.pointerLock=document.pointerLockElement===u.canvas||document.mozPointerLockElement===u.canvas||document.webkitPointerLockElement===u.canvas||document.msPointerLockElement===u.canvas}var n=u.canvas;n&&(n.requestPointerLock=n.requestPointerLock||n.mozRequestPointerLock||n.webkitRequestPointerLock||n.msRequestPointerLock||(()=>{}),n.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||(()=>{}),n.exitPointerLock=n.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",t,!1),document.addEventListener("mozpointerlockchange",t,!1),document.addEventListener("webkitpointerlockchange",t,!1),document.addEventListener("mspointerlockchange",t,!1),u.elementPointerLock&&n.addEventListener("click",a=>{!R.pointerLock&&u.canvas.requestPointerLock&&(u.canvas.requestPointerLock(),a.preventDefault())},!1))},createContext(e,r,t,n){if(r&&u.ctx&&e==u.canvas)return u.ctx;var a,i;if(r){var c={antialias:!1,alpha:!1,majorVersion:1};if(n)for(var d in n)c[d]=n[d];typeof y<"u"&&(i=y.createContext(e,c),i&&(a=y.getContext(i).GLctx))}else a=e.getContext("2d");return a?(t&&(u.ctx=a,r&&y.makeContextCurrent(i),R.useWebGL=r,R.moduleContextCreatedCallbacks.forEach(m=>m()),R.init()),a):null},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen(e,r){R.lockPointer=e,R.resizeCanvas=r,typeof R.lockPointer>"u"&&(R.lockPointer=!0),typeof R.resizeCanvas>"u"&&(R.resizeCanvas=!1);var t=u.canvas;function n(){var c,d;R.isFullscreen=!1;var i=t.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===i?(t.exitFullscreen=R.exitFullscreen,R.lockPointer&&t.requestPointerLock(),R.isFullscreen=!0,R.resizeCanvas?R.setFullscreenCanvasSize():R.updateCanvasDimensions(t)):(i.parentNode.insertBefore(t,i),i.parentNode.removeChild(i),R.resizeCanvas?R.setWindowedCanvasSize():R.updateCanvasDimensions(t)),(c=u.onFullScreen)==null||c.call(u,R.isFullscreen),(d=u.onFullscreen)==null||d.call(u,R.isFullscreen)}R.fullscreenHandlersInstalled||(R.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",n,!1),document.addEventListener("mozfullscreenchange",n,!1),document.addEventListener("webkitfullscreenchange",n,!1),document.addEventListener("MSFullscreenChange",n,!1));var a=document.createElement("div");t.parentNode.insertBefore(a,t),a.appendChild(t),a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||(a.webkitRequestFullscreen?()=>a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):null)||(a.webkitRequestFullScreen?()=>a.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):null),a.requestFullscreen()},exitFullscreen(){if(!R.isFullscreen)return!1;var e=document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||(()=>{});return e.apply(document,[]),!0},safeSetTimeout(e,r){return qn(e,r)},getMimetype(e){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[e.substr(e.lastIndexOf(".")+1)]},getUserMedia(e){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(e)},getMovementX(e){return e.movementX||e.mozMovementX||e.webkitMovementX||0},getMovementY(e){return e.movementY||e.mozMovementY||e.webkitMovementY||0},getMouseWheelDelta(e){var r=0;switch(e.type){case"DOMMouseScroll":r=e.detail/3;break;case"mousewheel":r=e.wheelDelta/120;break;case"wheel":switch(r=e.deltaY,e.deltaMode){case 0:r/=100;break;case 1:r/=3;break;case 2:r*=80;break;default:throw"unrecognized mouse wheel delta mode: "+e.deltaMode}break;default:throw"unrecognized mouse wheel event: "+e.type}return r},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseCoords(e,r){var t=u.canvas.getBoundingClientRect(),n=u.canvas.width,a=u.canvas.height,i=typeof window.scrollX<"u"?window.scrollX:window.pageXOffset,c=typeof window.scrollY<"u"?window.scrollY:window.pageYOffset,d=e-(i+t.left),m=r-(c+t.top);return d=d*(n/t.width),m=m*(a/t.height),{x:d,y:m}},setMouseCoords(e,r){const{x:t,y:n}=R.calculateMouseCoords(e,r);R.mouseMovementX=t-R.mouseX,R.mouseMovementY=n-R.mouseY,R.mouseX=t,R.mouseY=n},calculateMouseEvent(e){if(R.pointerLock)e.type!="mousemove"&&"mozMovementX"in e?R.mouseMovementX=R.mouseMovementY=0:(R.mouseMovementX=R.getMovementX(e),R.mouseMovementY=R.getMovementY(e)),R.mouseX+=R.mouseMovementX,R.mouseY+=R.mouseMovementY;else{if(e.type==="touchstart"||e.type==="touchend"||e.type==="touchmove"){var r=e.touch;if(r===void 0)return;var t=R.calculateMouseCoords(r.pageX,r.pageY);if(e.type==="touchstart")R.lastTouches[r.identifier]=t,R.touches[r.identifier]=t;else if(e.type==="touchend"||e.type==="touchmove"){var n=R.touches[r.identifier];n||(n=t),R.lastTouches[r.identifier]=n,R.touches[r.identifier]=t}return}R.setMouseCoords(e.pageX,e.pageY)}},resizeListeners:[],updateResizeListeners(){var e=u.canvas;R.resizeListeners.forEach(r=>r(e.width,e.height))},setCanvasSize(e,r,t){var n=u.canvas;R.updateCanvasDimensions(n,e,r),t||R.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize(){if(typeof SDL<"u"){var e=Z[SDL.screen>>2];e=e|8388608,v[SDL.screen>>2]=e}R.updateCanvasDimensions(u.canvas),R.updateResizeListeners()},setWindowedCanvasSize(){if(typeof SDL<"u"){var e=Z[SDL.screen>>2];e=e&-8388609,v[SDL.screen>>2]=e}R.updateCanvasDimensions(u.canvas),R.updateResizeListeners()},updateCanvasDimensions(e,r,t){r&&t?(e.widthNative=r,e.heightNative=t):(r=e.widthNative,t=e.heightNative);var n=r,a=t;if(u.forcedAspectRatio&&u.forcedAspectRatio>0&&(n/a<u.forcedAspectRatio?n=Math.round(a*u.forcedAspectRatio):a=Math.round(n/u.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===e.parentNode&&typeof screen<"u"){var i=Math.min(screen.width/n,screen.height/a);n=Math.round(n*i),a=Math.round(a*i)}R.resizeCanvas?(e.width!=n&&(e.width=n),e.height!=a&&(e.height=a),typeof e.style<"u"&&(e.style.removeProperty("width"),e.style.removeProperty("height"))):(e.width!=r&&(e.width=r),e.height!=t&&(e.height=t),typeof e.style<"u"&&(n!=r||a!=t?(e.style.setProperty("width",n+"px","important"),e.style.setProperty("height",a+"px","important")):(e.style.removeProperty("width"),e.style.removeProperty("height"))))}},P={errorCode:12288,defaultDisplayInitialized:!1,currentContext:0,currentReadSurface:0,currentDrawSurface:0,contextAttributes:{alpha:!1,depth:!1,stencil:!1,antialias:!1},stringCache:{},setErrorCode(e){P.errorCode=e},chooseConfig(e,r,t,n,a){if(e!=62e3)return P.setErrorCode(12296),0;if(r)for(;;){var i=v[r>>2];if(i==12321){var c=v[r+4>>2];P.contextAttributes.alpha=c>0}else if(i==12325){var d=v[r+4>>2];P.contextAttributes.depth=d>0}else if(i==12326){var m=v[r+4>>2];P.contextAttributes.stencil=m>0}else if(i==12337){var p=v[r+4>>2];P.contextAttributes.antialias=p>0}else if(i==12338){var p=v[r+4>>2];P.contextAttributes.antialias=p==1}else if(i==12544){var E=v[r+4>>2];P.contextAttributes.lowLatency=E!=12547}else if(i==12344)break;r+=8}return(!t||!n)&&!a?(P.setErrorCode(12300),0):(a&&(v[a>>2]=1),t&&n>0&&(Z[t>>2]=62002),P.setErrorCode(12288),1)}},Hi=e=>e==12448?(P.setErrorCode(12288),1):(P.setErrorCode(12300),0),ji=(e,r,t,n,a)=>P.chooseConfig(e,r,t,n,a),h,Xi=e=>{var r=e.getExtension("ANGLE_instanced_arrays");if(r)return e.vertexAttribDivisor=(t,n)=>r.vertexAttribDivisorANGLE(t,n),e.drawArraysInstanced=(t,n,a,i)=>r.drawArraysInstancedANGLE(t,n,a,i),e.drawElementsInstanced=(t,n,a,i,c)=>r.drawElementsInstancedANGLE(t,n,a,i,c),1},Wi=e=>{var r=e.getExtension("OES_vertex_array_object");if(r)return e.createVertexArray=()=>r.createVertexArrayOES(),e.deleteVertexArray=t=>r.deleteVertexArrayOES(t),e.bindVertexArray=t=>r.bindVertexArrayOES(t),e.isVertexArray=t=>r.isVertexArrayOES(t),1},Vi=e=>{var r=e.getExtension("WEBGL_draw_buffers");if(r)return e.drawBuffers=(t,n)=>r.drawBuffersWEBGL(t,n),1},Yi=e=>!!(e.extPolygonOffsetClamp=e.getExtension("EXT_polygon_offset_clamp")),Qi=e=>!!(e.extClipControl=e.getExtension("EXT_clip_control")),Ki=e=>!!(e.webglPolygonMode=e.getExtension("WEBGL_polygon_mode")),$i=e=>!!(e.multiDrawWebgl=e.getExtension("WEBGL_multi_draw")),Hn=e=>{var r=["ANGLE_instanced_arrays","EXT_blend_minmax","EXT_disjoint_timer_query","EXT_frag_depth","EXT_shader_texture_lod","EXT_sRGB","OES_element_index_uint","OES_fbo_render_mipmap","OES_standard_derivatives","OES_texture_float","OES_texture_half_float","OES_texture_half_float_linear","OES_vertex_array_object","WEBGL_color_buffer_float","WEBGL_depth_texture","WEBGL_draw_buffers","EXT_clip_control","EXT_color_buffer_half_float","EXT_depth_clamp","EXT_float_blend","EXT_polygon_offset_clamp","EXT_texture_compression_bptc","EXT_texture_compression_rgtc","EXT_texture_filter_anisotropic","KHR_parallel_shader_compile","OES_texture_float_linear","WEBGL_blend_func_extended","WEBGL_compressed_texture_astc","WEBGL_compressed_texture_etc","WEBGL_compressed_texture_etc1","WEBGL_compressed_texture_s3tc","WEBGL_compressed_texture_s3tc_srgb","WEBGL_debug_renderer_info","WEBGL_debug_shaders","WEBGL_lose_context","WEBGL_multi_draw","WEBGL_polygon_mode"];return(e.getSupportedExtensions()||[]).filter(t=>r.includes(t))},y={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},queries:[],stringCache:{},unpackAlignment:4,unpackRowLength:0,recordError:e=>{y.lastError||(y.lastError=e)},getNewId:e=>{for(var r=y.counter++,t=e.length;t<r;t++)e[t]=null;return r},genObject:(e,r,t,n)=>{for(var a=0;a<e;a++){var i=h[t](),c=i&&y.getNewId(n);i?(i.name=c,n[c]=i):y.recordError(1282),v[r+a*4>>2]=c}},getSource:(e,r,t,n)=>{for(var a="",i=0;i<r;++i){var c=n?Z[n+i*4>>2]:void 0;a+=xe(Z[t+i*4>>2],c)}return a},createContext:(e,r)=>{if(!e.getContextSafariWebGL2Fixed){let a=function(i,c){var d=e.getContextSafariWebGL2Fixed(i,c);return i=="webgl"==d instanceof WebGLRenderingContext?d:null};e.getContextSafariWebGL2Fixed=e.getContext,e.getContext=a}var t=e.getContext("webgl",r);if(!t)return 0;var n=y.registerContext(t,r);return n},registerContext:(e,r)=>{var t=y.getNewId(y.contexts),n={handle:t,attributes:r,version:r.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=n),y.contexts[t]=n,(typeof r.enableExtensionsByDefault>"u"||r.enableExtensionsByDefault)&&y.initExtensions(n),t},makeContextCurrent:e=>{var r;return y.currentContext=y.contexts[e],u.ctx=h=(r=y.currentContext)==null?void 0:r.GLctx,!(e&&!h)},getContext:e=>y.contexts[e],deleteContext:e=>{y.currentContext===y.contexts[e]&&(y.currentContext=null),typeof x=="object"&&x.removeAllHandlersOnTarget(y.contexts[e].GLctx.canvas),y.contexts[e]&&y.contexts[e].GLctx.canvas&&(y.contexts[e].GLctx.canvas.GLctxObject=void 0),y.contexts[e]=null},initExtensions:e=>{if(e||(e=y.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var r=e.GLctx;$i(r),Yi(r),Qi(r),Ki(r),Xi(r),Wi(r),Vi(r),r.disjointTimerQueryExt=r.getExtension("EXT_disjoint_timer_query"),Hn(r).forEach(t=>{!t.includes("lose_context")&&!t.includes("debug")&&r.getExtension(t)})}}},Zi=(e,r,t,n)=>{if(e!=62e3)return P.setErrorCode(12296),0;for(var a=1;;){var i=v[n>>2];if(i==12440)a=v[n+4>>2];else{if(i==12344)break;return P.setErrorCode(12292),0}n+=8}return a!=2?(P.setErrorCode(12293),0):(P.contextAttributes.majorVersion=a-1,P.contextAttributes.minorVersion=0,P.context=y.createContext(u.canvas,P.contextAttributes),P.context!=0?(P.setErrorCode(12288),y.makeContextCurrent(P.context),R.useWebGL=!0,R.moduleContextCreatedCallbacks.forEach(c=>c()),y.makeContextCurrent(null),62004):(P.setErrorCode(12297),0))},Ji=(e,r,t,n)=>e!=62e3?(P.setErrorCode(12296),0):r!=62002?(P.setErrorCode(12293),0):(P.setErrorCode(12288),62006),eo=(e,r)=>e!=62e3?(P.setErrorCode(12296),0):r!=62004?(P.setErrorCode(12294),0):(y.deleteContext(P.context),P.setErrorCode(12288),P.currentContext==r&&(P.currentContext=0),1),ro=(e,r)=>e!=62e3?(P.setErrorCode(12296),0):r!=62006?(P.setErrorCode(12301),1):(P.currentReadSurface==r&&(P.currentReadSurface=0),P.currentDrawSurface==r&&(P.currentDrawSurface=0),P.setErrorCode(12288),1),to=(e,r,t,n)=>{if(e!=62e3)return P.setErrorCode(12296),0;if(r!=62002)return P.setErrorCode(12293),0;if(!n)return P.setErrorCode(12300),0;switch(P.setErrorCode(12288),t){case 12320:return v[n>>2]=P.contextAttributes.alpha?32:24,1;case 12321:return v[n>>2]=P.contextAttributes.alpha?8:0,1;case 12322:return v[n>>2]=8,1;case 12323:return v[n>>2]=8,1;case 12324:return v[n>>2]=8,1;case 12325:return v[n>>2]=P.contextAttributes.depth?24:0,1;case 12326:return v[n>>2]=P.contextAttributes.stencil?8:0,1;case 12327:return v[n>>2]=12344,1;case 12328:return v[n>>2]=62002,1;case 12329:return v[n>>2]=0,1;case 12330:return v[n>>2]=4096,1;case 12331:return v[n>>2]=16777216,1;case 12332:return v[n>>2]=4096,1;case 12333:return v[n>>2]=0,1;case 12334:return v[n>>2]=0,1;case 12335:return v[n>>2]=12344,1;case 12337:return v[n>>2]=P.contextAttributes.antialias?4:0,1;case 12338:return v[n>>2]=P.contextAttributes.antialias?1:0,1;case 12339:return v[n>>2]=4,1;case 12340:return v[n>>2]=12344,1;case 12341:case 12342:case 12343:return v[n>>2]=-1,1;case 12345:case 12346:return v[n>>2]=0,1;case 12347:return v[n>>2]=0,1;case 12348:return v[n>>2]=1,1;case 12349:case 12350:return v[n>>2]=0,1;case 12351:return v[n>>2]=12430,1;case 12352:return v[n>>2]=4,1;case 12354:return v[n>>2]=0,1;default:return P.setErrorCode(12292),0}},no=e=>(P.setErrorCode(12288),e!=0&&e!=1?0:62e3),ao=()=>P.errorCode,io=(e,r,t)=>e!=62e3?(P.setErrorCode(12296),0):(r&&(v[r>>2]=1),t&&(v[t>>2]=4),P.defaultDisplayInitialized=!0,P.setErrorCode(12288),1),oo=(e,r,t,n)=>e!=62e3?(P.setErrorCode(12296),0):n!=0&&n!=62004?(P.setErrorCode(12294),0):t!=0&&t!=62006||r!=0&&r!=62006?(P.setErrorCode(12301),0):(y.makeContextCurrent(n?P.context:null),P.currentContext=n,P.currentDrawSurface=r,P.currentReadSurface=t,P.setErrorCode(12288),1),nr=e=>{var r=ot(e)+1,t=Me(r);return t&&se(e,t,r),t},so=(e,r)=>{if(e!=62e3)return P.setErrorCode(12296),0;if(P.setErrorCode(12288),P.stringCache[r])return P.stringCache[r];var t;switch(r){case 12371:t=nr("Emscripten");break;case 12372:t=nr("1.4 Emscripten EGL");break;case 12373:t=nr("");break;case 12429:t=nr("OpenGL_ES");break;default:return P.setErrorCode(12300),0}return P.stringCache[r]=t,t},lo=(e,r)=>{if(!P.defaultDisplayInitialized)P.setErrorCode(12289);else if(!h)P.setErrorCode(12290);else if(h.isContextLost())P.setErrorCode(12302);else return P.setErrorCode(12288),1;return 0},jn=(e,r,t,n,a)=>{B.func=e,B.arg=n;var i=B.currentlyRunningMainloop;function c(){return i<B.currentlyRunningMainloop?(Un(),!1):!0}if(B.running=!1,B.runner=function(){if(!Q){if(B.queue.length>0){var m=B.queue.shift();if(m.func(m.arg),B.remainingBlockers){var p=B.remainingBlockers,E=p%1==0?p-1:Math.floor(p);m.counted?B.remainingBlockers=E:(E=E+.5,B.remainingBlockers=(8*p+E)/9)}if(B.updateStatus(),!c())return;setTimeout(B.runner,0);return}if(c()){if(B.currentFrameNumber=B.currentFrameNumber+1|0,B.timingMode==1&&B.timingValue>1&&B.currentFrameNumber%B.timingValue!=0){B.scheduler();return}else B.timingMode==0&&(B.tickStartTime=Wt());B.runIter(e),c()&&B.scheduler()}}},a||(r&&r>0?Br(0,1e3/r):Br(1,1),B.scheduler()),t)throw"unwind"},B={running:!1,scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],preMainLoop:[],postMainLoop:[],pause(){B.scheduler=null,B.currentlyRunningMainloop++},resume(){B.currentlyRunningMainloop++;var e=B.timingMode,r=B.timingValue,t=B.func;B.func=null,jn(t,0,!1,B.arg,!0),Br(e,r),B.scheduler()},updateStatus(){if(u.setStatus){var e=u.statusMessage||"Please wait...",r=B.remainingBlockers??0,t=B.expectedBlockers??0;r?r<t?u.setStatus("{message} ({expected - remaining}/{expected})"):u.setStatus(e):u.setStatus("")}},init(){u.preMainLoop&&B.preMainLoop.push(u.preMainLoop),u.postMainLoop&&B.postMainLoop.push(u.postMainLoop)},runIter(e){if(!Q){for(var r of B.preMainLoop)if(r()===!1)return;zn(e);for(var t of B.postMainLoop)t()}},nextRAF:0,fakeRequestAnimationFrame(e){var r=Date.now();if(B.nextRAF===0)B.nextRAF=r+1e3/60;else for(;r+2>=B.nextRAF;)B.nextRAF+=1e3/60;var t=Math.max(B.nextRAF-r,0);setTimeout(e,t)},requestAnimationFrame(e){if(typeof requestAnimationFrame=="function"){requestAnimationFrame(e);return}var r=B.fakeRequestAnimationFrame;r(e)}},Br=(e,r)=>{if(B.timingMode=e,B.timingValue=r,!B.func)return 1;if(B.running||(B.running=!0),e==0)B.scheduler=function(){var c=Math.max(0,B.tickStartTime+r-Wt())|0;setTimeout(B.runner,c)},B.method="timeout";else if(e==1)B.scheduler=function(){B.requestAnimationFrame(B.runner)},B.method="rAF";else if(e==2){if(typeof B.setImmediate>"u")if(typeof setImmediate>"u"){var t=[],n="setimmediate",a=i=>{(i.data===n||i.data.target===n)&&(i.stopPropagation(),t.shift()())};addEventListener("message",a,!0),B.setImmediate=i=>{t.push(i),postMessage(n,"*")}}else B.setImmediate=setImmediate;B.scheduler=function(){B.setImmediate(B.runner)},B.method="immediate"}return 0},uo=(e,r)=>e!=62e3?(P.setErrorCode(12296),0):(r==0?Br(0,0):Br(1,r),P.setErrorCode(12288),1),co=e=>e!=62e3?(P.setErrorCode(12296),0):(P.currentContext=0,P.currentReadSurface=0,P.currentDrawSurface=0,P.defaultDisplayInitialized=!1,P.setErrorCode(12288),1),fo=()=>(P.setErrorCode(12288),1),vo=fo,mo=e=>(P.setErrorCode(12288),1),Qt=[],Xn=(e,r)=>{Qt.length=0;for(var t;t=$[e++];){var n=t!=105;n&=t!=112,r+=n&&r%8?4:0,Qt.push(t==112?Z[r>>2]:t==106?Fe[r>>3]:t==105?v[r>>2]:he[r>>3]),r+=n?8:4}return Qt},_o=(e,r,t)=>{var n=Xn(r,t);return Er[e](...n)},go=(e,r,t)=>_o(e,r,t),Wn=(e,r,t,n)=>{var a=Xn(r,t);return Er[e](...a)},ho=(e,r,t)=>Wn(e,r,t),po=(e,r,t)=>Wn(e,r,t),yo=()=>{B.pause(),B.func=null},x={memcpy(e,r,t){N.set(N.subarray(r,r+t),e)},removeAllEventListeners(){for(;x.eventHandlers.length;)x._removeHandler(x.eventHandlers.length-1);x.deferredCalls=[]},inEventHandler:0,deferredCalls:[],deferCall(e,r,t){function n(i,c){if(i.length!=c.length)return!1;for(var d in i)if(i[d]!=c[d])return!1;return!0}for(var a of x.deferredCalls)if(a.targetFunction==e&&n(a.argsList,t))return;x.deferredCalls.push({targetFunction:e,precedence:r,argsList:t}),x.deferredCalls.sort((i,c)=>i.precedence<c.precedence)},removeDeferredCalls(e){x.deferredCalls=x.deferredCalls.filter(r=>r.targetFunction!=e)},canPerformEventHandlerRequests(){return navigator.userActivation?navigator.userActivation.isActive:x.inEventHandler&&x.currentEventHandler.allowsDeferredCalls},runDeferredCalls(){if(x.canPerformEventHandlerRequests()){var e=x.deferredCalls;x.deferredCalls=[];for(var r of e)r.targetFunction(...r.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:(e,r)=>{for(var t=0;t<x.eventHandlers.length;++t)x.eventHandlers[t].target==e&&(!r||r==x.eventHandlers[t].eventTypeString)&&x._removeHandler(t--)},_removeHandler(e){var r=x.eventHandlers[e];r.target.removeEventListener(r.eventTypeString,r.eventListenerFunc,r.useCapture),x.eventHandlers.splice(e,1)},registerOrRemoveHandler(e){if(!e.target)return-4;if(e.callbackfunc)e.eventListenerFunc=function(t){++x.inEventHandler,x.currentEventHandler=e,x.runDeferredCalls(),e.handlerFunc(t),x.runDeferredCalls(),--x.inEventHandler},e.target.addEventListener(e.eventTypeString,e.eventListenerFunc,e.useCapture),x.eventHandlers.push(e);else for(var r=0;r<x.eventHandlers.length;++r)x.eventHandlers[r].target==e.target&&x.eventHandlers[r].eventTypeString==e.eventTypeString&&x._removeHandler(r--);return 0},getNodeNameForTarget(e){return e?e==window?"#window":e==screen?"#screen":(e==null?void 0:e.nodeName)||"":""},fullscreenEnabled(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}},st={},Eo=e=>e>2?xe(e):e,lt=[0,document,window],we=e=>{e=Eo(e);var r=lt[e]||document.querySelector(e);return r},Vn=we,wo=(e,r,t)=>{var n=Vn(e);if(!n)return-4;v[r>>2]=n.width,v[t>>2]=n.height},ut=e=>am(e),ct=e=>{var r=ot(e)+1,t=ut(r);return se(e,t,r),t},Yn=e=>{var r=Ut(),t=ut(8),n=t+4,a=ct(e.id);wo(a,t,n);var i=[v[t>>2],v[n>>2]];return Nt(r),i},Qn=(e,r,t)=>{var n=Vn(e);return n?(n.width=r,n.height=t,0):-4},Kn=(e,r,t)=>{if(!e.controlTransferredOffscreen)e.width=r,e.height=t;else{var n=Ut(),a=ct(e.id);Qn(a,r,t),Nt(n)}},ft=[],$n,be=e=>{var r=ft[e];return r||(e>=ft.length&&(ft.length=e+1),ft[e]=r=$n.get(e)),r},bo=e=>{var r=Yn(e),t=r[0],n=r[1],a=e.style.width,i=e.style.height,c=e.style.backgroundColor,d=document.body.style.backgroundColor,m=e.style.paddingLeft,p=e.style.paddingRight,E=e.style.paddingTop,S=e.style.paddingBottom,O=e.style.marginLeft,C=e.style.marginRight,D=e.style.marginTop,W=e.style.marginBottom,K=document.body.style.margin,j=document.documentElement.style.overflow,ve=document.body.scroll,le=e.style.imageRendering;function ue(){var ye=document.fullscreenElement||document.webkitFullscreenElement;ye||(document.removeEventListener("fullscreenchange",ue),document.removeEventListener("webkitfullscreenchange",ue),Kn(e,t,n),e.style.width=a,e.style.height=i,e.style.backgroundColor=c,d||(document.body.style.backgroundColor="white"),document.body.style.backgroundColor=d,e.style.paddingLeft=m,e.style.paddingRight=p,e.style.paddingTop=E,e.style.paddingBottom=S,e.style.marginLeft=O,e.style.marginRight=C,e.style.marginTop=D,e.style.marginBottom=W,document.body.style.margin=K,document.documentElement.style.overflow=j,document.body.scroll=ve,e.style.imageRendering=le,e.GLctxObject&&e.GLctxObject.GLctx.viewport(0,0,t,n),st.canvasResizedCallback&&be(st.canvasResizedCallback)(37,0,st.canvasResizedCallbackUserData))}return document.addEventListener("fullscreenchange",ue),document.addEventListener("webkitfullscreenchange",ue),ue},Kt=(e,r,t)=>{e.style.paddingLeft=e.style.paddingRight=t+"px",e.style.paddingTop=e.style.paddingBottom=r+"px"},dt=e=>lt.indexOf(e)<0?e.getBoundingClientRect():{left:0,top:0},ko=(e,r)=>{var K,j;var t=bo(e),n=r.softFullscreen?innerWidth:screen.width,a=r.softFullscreen?innerHeight:screen.height,i=dt(e),c=i.width,d=i.height,m=Yn(e),p=m[0],E=m[1];if(r.scaleMode==3)Kt(e,(a-d)/2,(n-c)/2),n=c,a=d;else if(r.scaleMode==2)if(n*E<p*a){var S=E*n/p;Kt(e,(a-S)/2,0),a=S}else{var O=p*a/E;Kt(e,0,(n-O)/2),n=O}(K=e.style).backgroundColor||(K.backgroundColor="black"),(j=document.body.style).backgroundColor||(j.backgroundColor="black"),e.style.width=n+"px",e.style.height=a+"px",r.filteringMode==1&&(e.style.imageRendering="optimizeSpeed",e.style.imageRendering="-moz-crisp-edges",e.style.imageRendering="-o-crisp-edges",e.style.imageRendering="-webkit-optimize-contrast",e.style.imageRendering="optimize-contrast",e.style.imageRendering="crisp-edges",e.style.imageRendering="pixelated");var C=r.canvasResolutionScaleMode==2?devicePixelRatio:1;if(r.canvasResolutionScaleMode!=0){var D=n*C|0,W=a*C|0;Kn(e,D,W),e.GLctxObject&&e.GLctxObject.GLctx.viewport(0,0,D,W)}return t},$t=(e,r)=>{if((r.scaleMode!=0||r.canvasResolutionScaleMode!=0)&&ko(e,r),e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);else return x.fullscreenEnabled()?-3:-1;return st=r,r.canvasResizedCallback&&be(r.canvasResizedCallback)(37,0,r.canvasResizedCallbackUserData),0},xo=()=>{if(!x.fullscreenEnabled())return-1;x.removeDeferredCalls($t);var e=lt[1];if(e.exitFullscreen)e.fullscreenElement&&e.exitFullscreen();else if(e.webkitExitFullscreen)e.webkitFullscreenElement&&e.webkitExitFullscreen();else return-1;return 0},Zt=e=>{if(e.requestPointerLock)e.requestPointerLock();else return document.body.requestPointerLock?-3:-1;return 0},Co=()=>{if(x.removeDeferredCalls(Zt),document.exitPointerLock)document.exitPointerLock();else return-1;return 0},So=()=>{throw"unwind"},Ao=()=>{Fn=!1,In=0},Do=e=>{Ao(),Yt(e)},Fo=()=>devicePixelRatio,To=(e,r,t)=>{if(e=we(e),!e)return-4;var n=dt(e);return he[r>>3]=n.width,he[t>>3]=n.height,0},Zn=(e,r)=>{he[e>>3]=r.timestamp;for(var t=0;t<r.axes.length;++t)he[e+t*8+16>>3]=r.axes[t];for(var t=0;t<r.buttons.length;++t)typeof r.buttons[t]=="object"?he[e+t*8+528>>3]=r.buttons[t].value:he[e+t*8+528>>3]=r.buttons[t];for(var t=0;t<r.buttons.length;++t)typeof r.buttons[t]=="object"?N[e+t+1040]=r.buttons[t].pressed:N[e+t+1040]=r.buttons[t]==1;N[e+1104]=r.connected,v[e+1108>>2]=r.index,v[e+8>>2]=r.axes.length,v[e+12>>2]=r.buttons.length,se(r.id,e+1112,64),se(r.mapping,e+1176,64)},Lo=(e,r)=>e<0||e>=x.lastGamepadState.length?-5:x.lastGamepadState[e]?(Zn(r,x.lastGamepadState[e]),0):-7,Po=()=>x.lastGamepadState.length,Ro=(e,r)=>{v[e>>2]=screen.width,v[r>>2]=screen.height},Bo=e=>h.activeTexture(e),Mo=Bo,Oo=(e,r)=>{h.attachShader(y.programs[e],y.shaders[r])},Io=Oo,Go=(e,r)=>{h.disjointTimerQueryExt.beginQueryEXT(e,y.queries[r])},No=Go,Uo=(e,r,t)=>{h.bindAttribLocation(y.programs[e],r,xe(t))},zo=Uo,qo=(e,r)=>{h.bindBuffer(e,y.buffers[r])},Ho=qo,jo=(e,r)=>{h.bindFramebuffer(e,y.framebuffers[r])},Xo=jo,Wo=(e,r)=>{h.bindRenderbuffer(e,y.renderbuffers[r])},Vo=Wo,Yo=(e,r)=>{h.bindTexture(e,y.textures[r])},Qo=Yo,Ko=e=>{h.bindVertexArray(y.vaos[e])},$o=Ko,Zo=$o,Jo=(e,r,t,n)=>h.blendColor(e,r,t,n),es=Jo,rs=e=>h.blendEquation(e),ts=rs,ns=(e,r)=>h.blendEquationSeparate(e,r),as=ns,is=(e,r)=>h.blendFunc(e,r),os=is,ss=(e,r,t,n)=>h.blendFuncSeparate(e,r,t,n),ls=ss,us=(e,r,t,n)=>{h.bufferData(e,t?$.subarray(t,t+r):r,n)},cs=us,fs=(e,r,t,n)=>{h.bufferSubData(e,r,$.subarray(n,n+t))},ds=fs,vs=e=>h.checkFramebufferStatus(e),ms=vs,_s=e=>h.clear(e),gs=_s,hs=(e,r,t,n)=>h.clearColor(e,r,t,n),ps=hs,ys=e=>h.clearDepth(e),Es=ys,ws=e=>h.clearStencil(e),bs=ws,ks=(e,r)=>{h.extClipControl.clipControlEXT(e,r)},xs=ks,Cs=(e,r,t,n)=>{h.colorMask(!!e,!!r,!!t,!!n)},Ss=Cs,As=e=>{h.compileShader(y.shaders[e])},Ds=As,Fs=(e,r,t,n,a,i,c,d)=>{h.compressedTexImage2D(e,r,t,n,a,i,$.subarray(d,d+c))},Ts=Fs,Ls=(e,r,t,n,a,i,c,d,m)=>{h.compressedTexSubImage2D(e,r,t,n,a,i,c,$.subarray(m,m+d))},Ps=Ls,Rs=(e,r,t,n,a,i,c,d)=>h.copyTexImage2D(e,r,t,n,a,i,c,d),Bs=Rs,Ms=(e,r,t,n,a,i,c,d)=>h.copyTexSubImage2D(e,r,t,n,a,i,c,d),Os=Ms,Is=()=>{var e=y.getNewId(y.programs),r=h.createProgram();return r.name=e,r.maxUniformLength=r.maxAttributeLength=r.maxUniformBlockNameLength=0,r.uniformIdCounter=1,y.programs[e]=r,e},Gs=Is,Ns=e=>{var r=y.getNewId(y.shaders);return y.shaders[r]=h.createShader(e),r},Us=Ns,zs=e=>h.cullFace(e),qs=zs,Hs=(e,r)=>{for(var t=0;t<e;t++){var n=v[r+t*4>>2],a=y.buffers[n];a&&(h.deleteBuffer(a),a.name=0,y.buffers[n]=null)}},js=Hs,Xs=(e,r)=>{for(var t=0;t<e;++t){var n=v[r+t*4>>2],a=y.framebuffers[n];a&&(h.deleteFramebuffer(a),a.name=0,y.framebuffers[n]=null)}},Ws=Xs,Vs=e=>{if(e){var r=y.programs[e];if(!r){y.recordError(1281);return}h.deleteProgram(r),r.name=0,y.programs[e]=null}},Ys=Vs,Qs=(e,r)=>{for(var t=0;t<e;t++){var n=v[r+t*4>>2],a=y.queries[n];a&&(h.disjointTimerQueryExt.deleteQueryEXT(a),y.queries[n]=null)}},Ks=Qs,$s=(e,r)=>{for(var t=0;t<e;t++){var n=v[r+t*4>>2],a=y.renderbuffers[n];a&&(h.deleteRenderbuffer(a),a.name=0,y.renderbuffers[n]=null)}},Zs=$s,Js=e=>{if(e){var r=y.shaders[e];if(!r){y.recordError(1281);return}h.deleteShader(r),y.shaders[e]=null}},el=Js,rl=(e,r)=>{for(var t=0;t<e;t++){var n=v[r+t*4>>2],a=y.textures[n];a&&(h.deleteTexture(a),a.name=0,y.textures[n]=null)}},tl=rl,nl=(e,r)=>{for(var t=0;t<e;t++){var n=v[r+t*4>>2];h.deleteVertexArray(y.vaos[n]),y.vaos[n]=null}},al=nl,il=al,ol=e=>h.depthFunc(e),sl=ol,ll=e=>{h.depthMask(!!e)},ul=ll,cl=(e,r)=>h.depthRange(e,r),fl=cl,dl=(e,r)=>{h.detachShader(y.programs[e],y.shaders[r])},vl=dl,ml=e=>h.disable(e),_l=ml,gl=e=>{h.disableVertexAttribArray(e)},hl=gl,pl=(e,r,t)=>{h.drawArrays(e,r,t)},yl=pl,El=(e,r,t,n)=>{h.drawArraysInstanced(e,r,t,n)},wl=El,bl=wl,Jn=[],kl=(e,r)=>{for(var t=Jn[e],n=0;n<e;n++)t[n]=v[r+n*4>>2];h.drawBuffers(t)},xl=kl,Cl=xl,Sl=(e,r,t,n)=>{h.drawElements(e,r,t,n)},Al=Sl,Dl=(e,r,t,n,a)=>{h.drawElementsInstanced(e,r,t,n,a)},Fl=Dl,Tl=Fl,Ll=e=>h.enable(e),Pl=Ll,Rl=e=>{h.enableVertexAttribArray(e)},Bl=Rl,Ml=e=>{h.disjointTimerQueryExt.endQueryEXT(e)},Ol=Ml,Il=()=>h.finish(),Gl=Il,Nl=()=>h.flush(),Ul=Nl,zl=(e,r,t,n)=>{h.framebufferRenderbuffer(e,r,t,y.renderbuffers[n])},ql=zl,Hl=(e,r,t,n,a)=>{h.framebufferTexture2D(e,r,t,y.textures[n],a)},jl=Hl,Xl=e=>h.frontFace(e),Wl=Xl,Vl=(e,r)=>{y.genObject(e,r,"createBuffer",y.buffers)},Yl=Vl,Ql=(e,r)=>{y.genObject(e,r,"createFramebuffer",y.framebuffers)},Kl=Ql,$l=(e,r)=>{for(var t=0;t<e;t++){var n=h.disjointTimerQueryExt.createQueryEXT();if(!n){for(y.recordError(1282);t<e;)v[r+t++*4>>2]=0;return}var a=y.getNewId(y.queries);n.name=a,y.queries[a]=n,v[r+t*4>>2]=a}},Zl=$l,Jl=(e,r)=>{y.genObject(e,r,"createRenderbuffer",y.renderbuffers)},eu=Jl,ru=(e,r)=>{y.genObject(e,r,"createTexture",y.textures)},tu=ru,nu=(e,r)=>{y.genObject(e,r,"createVertexArray",y.vaos)},au=nu,iu=au,ou=e=>h.generateMipmap(e),su=ou,ea=(e,r,t,n,a,i,c,d)=>{r=y.programs[r];var m=h[e](r,t);if(m){var p=d&&se(m.name,d,n);a&&(v[a>>2]=p),i&&(v[i>>2]=m.size),c&&(v[c>>2]=m.type)}},lu=(e,r,t,n,a,i,c)=>ea("getActiveAttrib",e,r,t,n,a,i,c),uu=lu,cu=(e,r,t,n,a,i,c)=>ea("getActiveUniform",e,r,t,n,a,i,c),fu=cu,du=(e,r,t,n)=>{var a=h.getAttachedShaders(y.programs[e]),i=a.length;i>r&&(i=r),v[t>>2]=i;for(var c=0;c<i;++c){var d=y.shaders.indexOf(a[c]);v[n+c*4>>2]=d}},vu=du,mu=(e,r)=>h.getAttribLocation(y.programs[e],xe(r)),_u=mu,ra=(e,r)=>{Z[e>>2]=r;var t=Z[e>>2];Z[e+4>>2]=(r-t)/4294967296},Jt=(e,r,t)=>{if(!r){y.recordError(1281);return}var n=void 0;switch(e){case 36346:n=1;break;case 36344:t!=0&&t!=1&&y.recordError(1280);return;case 36345:n=0;break;case 34466:var a=h.getParameter(34467);n=a?a.length:0;break}if(n===void 0){var i=h.getParameter(e);switch(typeof i){case"number":n=i;break;case"boolean":n=i?1:0;break;case"string":y.recordError(1280);return;case"object":if(i===null)switch(e){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 34068:{n=0;break}default:{y.recordError(1280);return}}else if(i instanceof Float32Array||i instanceof Uint32Array||i instanceof Int32Array||i instanceof Array){for(var c=0;c<i.length;++c)switch(t){case 0:v[r+c*4>>2]=i[c];break;case 2:q[r+c*4>>2]=i[c];break;case 4:N[r+c]=i[c]?1:0;break}return}else try{n=i.name|0}catch(d){y.recordError(1280),X(`GL_INVALID_ENUM in glGet${t}v: Unknown object returned from WebGL getParameter(${e})! (error: ${d})`);return}break;default:y.recordError(1280),X(`GL_INVALID_ENUM in glGet${t}v: Native code calling glGet${t}v(${e}) and it returns ${i} of type ${typeof i}!`);return}}switch(t){case 1:ra(r,n);break;case 0:v[r>>2]=n;break;case 2:q[r>>2]=n;break;case 4:N[r]=n?1:0;break}},gu=(e,r)=>Jt(e,r,4),hu=gu,pu=(e,r,t)=>{if(!t){y.recordError(1281);return}v[t>>2]=h.getBufferParameter(e,r)},yu=pu,Eu=()=>{var e=h.getError()||y.lastError;return y.lastError=0,e},wu=Eu,bu=(e,r)=>Jt(e,r,2),ku=bu,xu=(e,r,t,n)=>{var a=h.getFramebufferAttachmentParameter(e,r,t);(a instanceof WebGLRenderbuffer||a instanceof WebGLTexture)&&(a=a.name|0),v[n>>2]=a},Cu=xu,Su=(e,r)=>Jt(e,r,0),Au=Su,Du=(e,r,t,n)=>{var a=h.getProgramInfoLog(y.programs[e]);a===null&&(a="(unknown error)");var i=r>0&&n?se(a,n,r):0;t&&(v[t>>2]=i)},Fu=Du,Tu=(e,r,t)=>{if(!t){y.recordError(1281);return}if(e>=y.counter){y.recordError(1281);return}if(e=y.programs[e],r==35716){var n=h.getProgramInfoLog(e);n===null&&(n="(unknown error)"),v[t>>2]=n.length+1}else if(r==35719){if(!e.maxUniformLength)for(var a=h.getProgramParameter(e,35718),i=0;i<a;++i)e.maxUniformLength=Math.max(e.maxUniformLength,h.getActiveUniform(e,i).name.length+1);v[t>>2]=e.maxUniformLength}else if(r==35722){if(!e.maxAttributeLength)for(var c=h.getProgramParameter(e,35721),i=0;i<c;++i)e.maxAttributeLength=Math.max(e.maxAttributeLength,h.getActiveAttrib(e,i).name.length+1);v[t>>2]=e.maxAttributeLength}else if(r==35381){if(!e.maxUniformBlockNameLength)for(var d=h.getProgramParameter(e,35382),i=0;i<d;++i)e.maxUniformBlockNameLength=Math.max(e.maxUniformBlockNameLength,h.getActiveUniformBlockName(e,i).length+1);v[t>>2]=e.maxUniformBlockNameLength}else v[t>>2]=h.getProgramParameter(e,r)},Lu=Tu,ta=(e,r,t)=>{if(!t){y.recordError(1281);return}var n=y.queries[e],a;a=h.disjointTimerQueryExt.getQueryObjectEXT(n,r);var i;typeof a=="boolean"?i=a?1:0:i=a,ra(t,i)},Pu=ta,na=(e,r,t)=>{if(!t){y.recordError(1281);return}var n=y.queries[e],a=h.disjointTimerQueryExt.getQueryObjectEXT(n,r),i;typeof a=="boolean"?i=a?1:0:i=a,v[t>>2]=i},Ru=na,Bu=ta,Mu=Bu,Ou=na,Iu=Ou,Gu=(e,r,t)=>{if(!t){y.recordError(1281);return}v[t>>2]=h.disjointTimerQueryExt.getQueryEXT(e,r)},Nu=Gu,Uu=(e,r,t)=>{if(!t){y.recordError(1281);return}v[t>>2]=h.getRenderbufferParameter(e,r)},zu=Uu,qu=(e,r,t,n)=>{var a=h.getShaderInfoLog(y.shaders[e]);a===null&&(a="(unknown error)");var i=r>0&&n?se(a,n,r):0;t&&(v[t>>2]=i)},Hu=qu,ju=(e,r,t,n)=>{var a=h.getShaderPrecisionFormat(e,r);v[t>>2]=a.rangeMin,v[t+4>>2]=a.rangeMax,v[n>>2]=a.precision},Xu=ju,Wu=(e,r,t,n)=>{var a=h.getShaderSource(y.shaders[e]);if(a){var i=r>0&&n?se(a,n,r):0;t&&(v[t>>2]=i)}},Vu=Wu,Yu=(e,r,t)=>{if(!t){y.recordError(1281);return}if(r==35716){var n=h.getShaderInfoLog(y.shaders[e]);n===null&&(n="(unknown error)");var a=n?n.length+1:0;v[t>>2]=a}else if(r==35720){var i=h.getShaderSource(y.shaders[e]),c=i?i.length+1:0;v[t>>2]=c}else v[t>>2]=h.getShaderParameter(y.shaders[e],r)},Qu=Yu,Ku=()=>{var e=Hn(h);return e=e.concat(e.map(r=>"GL_"+r)),e},$u=e=>{var r=y.stringCache[e];if(!r){switch(e){case 7939:r=nr(Ku().join(" "));break;case 7936:case 7937:case 37445:case 37446:var t=h.getParameter(e);t||y.recordError(1280),r=t?nr(t):0;break;case 7938:var n=h.getParameter(7938),a=`OpenGL ES 2.0 (${n})`;r=nr(a);break;case 35724:var i=h.getParameter(35724),c=/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/,d=i.match(c);d!==null&&(d[1].length==3&&(d[1]=d[1]+"0"),i=`OpenGL ES GLSL ES ${d[1]} (${i})`),r=nr(i);break;default:y.recordError(1280)}y.stringCache[e]=r}return r},Zu=$u,Ju=(e,r,t)=>{if(!t){y.recordError(1281);return}q[t>>2]=h.getTexParameter(e,r)},ec=Ju,rc=(e,r,t)=>{if(!t){y.recordError(1281);return}v[t>>2]=h.getTexParameter(e,r)},tc=rc,nc=e=>parseInt(e),aa=e=>e.slice(-1)=="]"&&e.lastIndexOf("["),ia=e=>{var r=e.uniformLocsById,t=e.uniformSizeAndIdsByName,n,a;if(!r){e.uniformLocsById=r={},e.uniformArrayNamesById={};var i=h.getProgramParameter(e,35718);for(n=0;n<i;++n){var c=h.getActiveUniform(e,n),d=c.name,m=c.size,p=aa(d),E=p>0?d.slice(0,p):d,S=e.uniformIdCounter;for(e.uniformIdCounter+=m,t[E]=[m,S],a=0;a<m;++a)r[S]=a,e.uniformArrayNamesById[S++]=E}}},ac=(e,r)=>{if(r=xe(r),e=y.programs[e]){ia(e);var t=e.uniformLocsById,n=0,a=r,i=aa(r);i>0&&(n=nc(r.slice(i+1))>>>0,a=r.slice(0,i));var c=e.uniformSizeAndIdsByName[a];if(c&&n<c[0]&&(n+=c[1],t[n]=t[n]||h.getUniformLocation(e,r)))return n}else y.recordError(1281);return-1},ic=ac,de=e=>{var r=h.currentProgram;if(r){var t=r.uniformLocsById[e];return typeof t=="number"&&(r.uniformLocsById[e]=t=h.getUniformLocation(r,r.uniformArrayNamesById[e]+(t>0?`[${t}]`:""))),t}else y.recordError(1282)},oa=(e,r,t,n)=>{if(!t){y.recordError(1281);return}e=y.programs[e],ia(e);var a=h.getUniform(e,de(r));if(typeof a=="number"||typeof a=="boolean")switch(n){case 0:v[t>>2]=a;break;case 2:q[t>>2]=a;break}else for(var i=0;i<a.length;i++)switch(n){case 0:v[t+i*4>>2]=a[i];break;case 2:q[t+i*4>>2]=a[i];break}},oc=(e,r,t)=>{oa(e,r,t,2)},sc=oc,lc=(e,r,t)=>{oa(e,r,t,0)},uc=lc,cc=(e,r,t)=>{if(!t){y.recordError(1281);return}v[t>>2]=h.getVertexAttribOffset(e,r)},fc=cc,sa=(e,r,t,n)=>{if(!t){y.recordError(1281);return}var a=h.getVertexAttrib(e,r);if(r==34975)v[t>>2]=a&&a.name;else if(typeof a=="number"||typeof a=="boolean")switch(n){case 0:v[t>>2]=a;break;case 2:q[t>>2]=a;break;case 5:v[t>>2]=Math.fround(a);break}else for(var i=0;i<a.length;i++)switch(n){case 0:v[t+i*4>>2]=a[i];break;case 2:q[t+i*4>>2]=a[i];break;case 5:v[t+i*4>>2]=Math.fround(a[i]);break}},dc=(e,r,t)=>{sa(e,r,t,2)},vc=dc,mc=(e,r,t)=>{sa(e,r,t,5)},_c=mc,gc=(e,r)=>h.hint(e,r),hc=gc,pc=e=>{var r=y.buffers[e];return r?h.isBuffer(r):0},yc=pc,Ec=e=>h.isEnabled(e),wc=Ec,bc=e=>{var r=y.framebuffers[e];return r?h.isFramebuffer(r):0},kc=bc,xc=e=>(e=y.programs[e],e?h.isProgram(e):0),Cc=xc,Sc=e=>{var r=y.queries[e];return r?h.disjointTimerQueryExt.isQueryEXT(r):0},Ac=Sc,Dc=e=>{var r=y.renderbuffers[e];return r?h.isRenderbuffer(r):0},Fc=Dc,Tc=e=>{var r=y.shaders[e];return r?h.isShader(r):0},Lc=Tc,Pc=e=>{var r=y.textures[e];return r?h.isTexture(r):0},Rc=Pc,Bc=e=>{var r=y.vaos[e];return r?h.isVertexArray(r):0},Mc=Bc,Oc=Mc,Ic=e=>h.lineWidth(e),Gc=Ic,Nc=e=>{e=y.programs[e],h.linkProgram(e),e.uniformLocsById=0,e.uniformSizeAndIdsByName={}},Uc=Nc,zc=(e,r)=>{e==3317?y.unpackAlignment=r:e==3314&&(y.unpackRowLength=r),h.pixelStorei(e,r)},qc=zc,Hc=(e,r)=>{h.webglPolygonMode.polygonModeWEBGL(e,r)},jc=Hc,Xc=(e,r)=>h.polygonOffset(e,r),Wc=Xc,Vc=(e,r,t)=>{h.extPolygonOffsetClamp.polygonOffsetClampEXT(e,r,t)},Yc=Vc,Qc=(e,r)=>{h.disjointTimerQueryExt.queryCounterEXT(y.queries[e],r)},Kc=Qc,$c=(e,r,t)=>{function n(c,d){return c+d-1&-d}var a=(y.unpackRowLength||e)*t,i=n(a,y.unpackAlignment);return r*i},Zc=e=>{var r={5:3,6:4,8:2,29502:3,29504:4};return r[e-6402]||1},Jc=e=>(e-=5120,e==1?$:e==4?v:e==6?q:e==5||e==28922?Z:ge),la=(e,r)=>e>>>31-Math.clz32(r.BYTES_PER_ELEMENT),en=(e,r,t,n,a,i)=>{var c=Jc(e),d=Zc(r)*c.BYTES_PER_ELEMENT,m=$c(t,n,d);return c.subarray(la(a,c),la(a+m,c))},ef=(e,r,t,n,a,i,c)=>{var d=en(i,a,t,n,c);if(!d){y.recordError(1280);return}h.readPixels(e,r,t,n,a,i,d)},rf=ef,tf=()=>{},nf=tf,af=(e,r,t,n)=>h.renderbufferStorage(e,r,t,n),of=af,sf=(e,r)=>{h.sampleCoverage(e,!!r)},lf=sf,uf=(e,r,t,n)=>h.scissor(e,r,t,n),cf=uf,ff=(e,r,t,n,a)=>{y.recordError(1280)},df=ff,vf=(e,r,t,n)=>{var a=y.getSource(e,r,t,n);h.shaderSource(y.shaders[e],a)},mf=vf,_f=(e,r,t)=>h.stencilFunc(e,r,t),gf=_f,hf=(e,r,t,n)=>h.stencilFuncSeparate(e,r,t,n),pf=hf,yf=e=>h.stencilMask(e),Ef=yf,wf=(e,r)=>h.stencilMaskSeparate(e,r),bf=wf,kf=(e,r,t)=>h.stencilOp(e,r,t),xf=kf,Cf=(e,r,t,n)=>h.stencilOpSeparate(e,r,t,n),Sf=Cf,Af=(e,r,t,n,a,i,c,d,m)=>{var p=m?en(d,c,n,a,m):null;h.texImage2D(e,r,t,n,a,i,c,d,p)},Df=Af,Ff=(e,r,t)=>h.texParameterf(e,r,t),Tf=Ff,Lf=(e,r,t)=>{var n=q[t>>2];h.texParameterf(e,r,n)},Pf=Lf,Rf=(e,r,t)=>h.texParameteri(e,r,t),Bf=Rf,Mf=(e,r,t)=>{var n=v[t>>2];h.texParameteri(e,r,n)},Of=Mf,If=(e,r,t,n,a,i,c,d,m)=>{var p=m?en(d,c,a,i,m):null;h.texSubImage2D(e,r,t,n,a,i,c,d,p)},Gf=If,Nf=(e,r)=>{h.uniform1f(de(e),r)},Uf=Nf,ar=[],zf=(e,r,t)=>{if(r<=288)for(var n=ar[r],a=0;a<r;++a)n[a]=q[t+4*a>>2];else var n=q.subarray(t>>2,t+r*4>>2);h.uniform1fv(de(e),n)},qf=zf,Hf=(e,r)=>{h.uniform1i(de(e),r)},jf=Hf,Mr=[],Xf=(e,r,t)=>{if(r<=288)for(var n=Mr[r],a=0;a<r;++a)n[a]=v[t+4*a>>2];else var n=v.subarray(t>>2,t+r*4>>2);h.uniform1iv(de(e),n)},Wf=Xf,Vf=(e,r,t)=>{h.uniform2f(de(e),r,t)},Yf=Vf,Qf=(e,r,t)=>{if(r<=144){r*=2;for(var n=ar[r],a=0;a<r;a+=2)n[a]=q[t+4*a>>2],n[a+1]=q[t+(4*a+4)>>2]}else var n=q.subarray(t>>2,t+r*8>>2);h.uniform2fv(de(e),n)},Kf=Qf,$f=(e,r,t)=>{h.uniform2i(de(e),r,t)},Zf=$f,Jf=(e,r,t)=>{if(r<=144){r*=2;for(var n=Mr[r],a=0;a<r;a+=2)n[a]=v[t+4*a>>2],n[a+1]=v[t+(4*a+4)>>2]}else var n=v.subarray(t>>2,t+r*8>>2);h.uniform2iv(de(e),n)},ed=Jf,rd=(e,r,t,n)=>{h.uniform3f(de(e),r,t,n)},td=rd,nd=(e,r,t)=>{if(r<=96){r*=3;for(var n=ar[r],a=0;a<r;a+=3)n[a]=q[t+4*a>>2],n[a+1]=q[t+(4*a+4)>>2],n[a+2]=q[t+(4*a+8)>>2]}else var n=q.subarray(t>>2,t+r*12>>2);h.uniform3fv(de(e),n)},ad=nd,id=(e,r,t,n)=>{h.uniform3i(de(e),r,t,n)},od=id,sd=(e,r,t)=>{if(r<=96){r*=3;for(var n=Mr[r],a=0;a<r;a+=3)n[a]=v[t+4*a>>2],n[a+1]=v[t+(4*a+4)>>2],n[a+2]=v[t+(4*a+8)>>2]}else var n=v.subarray(t>>2,t+r*12>>2);h.uniform3iv(de(e),n)},ld=sd,ud=(e,r,t,n,a)=>{h.uniform4f(de(e),r,t,n,a)},cd=ud,fd=(e,r,t)=>{if(r<=72){var n=ar[4*r],a=q;t=t>>2,r*=4;for(var i=0;i<r;i+=4){var c=t+i;n[i]=a[c],n[i+1]=a[c+1],n[i+2]=a[c+2],n[i+3]=a[c+3]}}else var n=q.subarray(t>>2,t+r*16>>2);h.uniform4fv(de(e),n)},dd=fd,vd=(e,r,t,n,a)=>{h.uniform4i(de(e),r,t,n,a)},md=vd,_d=(e,r,t)=>{if(r<=72){r*=4;for(var n=Mr[r],a=0;a<r;a+=4)n[a]=v[t+4*a>>2],n[a+1]=v[t+(4*a+4)>>2],n[a+2]=v[t+(4*a+8)>>2],n[a+3]=v[t+(4*a+12)>>2]}else var n=v.subarray(t>>2,t+r*16>>2);h.uniform4iv(de(e),n)},gd=_d,hd=(e,r,t,n)=>{if(r<=72){r*=4;for(var a=ar[r],i=0;i<r;i+=4)a[i]=q[n+4*i>>2],a[i+1]=q[n+(4*i+4)>>2],a[i+2]=q[n+(4*i+8)>>2],a[i+3]=q[n+(4*i+12)>>2]}else var a=q.subarray(n>>2,n+r*16>>2);h.uniformMatrix2fv(de(e),!!t,a)},pd=hd,yd=(e,r,t,n)=>{if(r<=32){r*=9;for(var a=ar[r],i=0;i<r;i+=9)a[i]=q[n+4*i>>2],a[i+1]=q[n+(4*i+4)>>2],a[i+2]=q[n+(4*i+8)>>2],a[i+3]=q[n+(4*i+12)>>2],a[i+4]=q[n+(4*i+16)>>2],a[i+5]=q[n+(4*i+20)>>2],a[i+6]=q[n+(4*i+24)>>2],a[i+7]=q[n+(4*i+28)>>2],a[i+8]=q[n+(4*i+32)>>2]}else var a=q.subarray(n>>2,n+r*36>>2);h.uniformMatrix3fv(de(e),!!t,a)},Ed=yd,wd=(e,r,t,n)=>{if(r<=18){var a=ar[16*r],i=q;n=n>>2,r*=16;for(var c=0;c<r;c+=16){var d=n+c;a[c]=i[d],a[c+1]=i[d+1],a[c+2]=i[d+2],a[c+3]=i[d+3],a[c+4]=i[d+4],a[c+5]=i[d+5],a[c+6]=i[d+6],a[c+7]=i[d+7],a[c+8]=i[d+8],a[c+9]=i[d+9],a[c+10]=i[d+10],a[c+11]=i[d+11],a[c+12]=i[d+12],a[c+13]=i[d+13],a[c+14]=i[d+14],a[c+15]=i[d+15]}}else var a=q.subarray(n>>2,n+r*64>>2);h.uniformMatrix4fv(de(e),!!t,a)},bd=wd,kd=e=>{e=y.programs[e],h.useProgram(e),h.currentProgram=e},xd=kd,Cd=e=>{h.validateProgram(y.programs[e])},Sd=Cd,Ad=(e,r)=>h.vertexAttrib1f(e,r),Dd=Ad,Fd=(e,r)=>{h.vertexAttrib1f(e,q[r>>2])},Td=Fd,Ld=(e,r,t)=>h.vertexAttrib2f(e,r,t),Pd=Ld,Rd=(e,r)=>{h.vertexAttrib2f(e,q[r>>2],q[r+4>>2])},Bd=Rd,Md=(e,r,t,n)=>h.vertexAttrib3f(e,r,t,n),Od=Md,Id=(e,r)=>{h.vertexAttrib3f(e,q[r>>2],q[r+4>>2],q[r+8>>2])},Gd=Id,Nd=(e,r,t,n,a)=>h.vertexAttrib4f(e,r,t,n,a),Ud=Nd,zd=(e,r)=>{h.vertexAttrib4f(e,q[r>>2],q[r+4>>2],q[r+8>>2],q[r+12>>2])},qd=zd,Hd=(e,r)=>{h.vertexAttribDivisor(e,r)},jd=Hd,Xd=jd,Wd=(e,r,t,n,a,i)=>{h.vertexAttribPointer(e,r,t,!!n,a,i)},Vd=Wd,Yd=(e,r,t,n)=>h.viewport(e,r,t,n),Qd=Yd,Kd=()=>0,$d=(e,r)=>x.fullscreenEnabled()?(e=we(e),e?!e.requestFullscreen&&!e.webkitRequestFullscreen?-3:x.canPerformEventHandlerRequests()?$t(e,r):r.deferUntilInEventHandler?(x.deferCall($t,1,[e,r]),1):-2:-4):-1,Zd=(e,r,t)=>{var n={scaleMode:v[t>>2],canvasResolutionScaleMode:v[t+4>>2],filteringMode:v[t+8>>2],deferUntilInEventHandler:r,canvasResizedCallback:v[t+12>>2],canvasResizedCallbackUserData:v[t+16>>2]};return $d(e,n)},Jd=(e,r)=>(e=we(e),e?e.requestPointerLock?x.canPerformEventHandlerRequests()?Zt(e):r?(x.deferCall(Zt,2,[e]),1):-2:-1:-4),ev=e=>{M("OOM")},rv=e=>{$.length,ev()},rn=()=>{try{if(navigator.getGamepads)return(x.lastGamepadState=navigator.getGamepads())?0:-1}catch{navigator.getGamepads=null}return-1},tv=(e,r,t,n,a,i)=>{var c=(m=event)=>{var p=be(n)(a,0,r);if(p&&(p=xe(p)),p)return m.preventDefault(),m.returnValue=p,p},d={target:we(e),eventTypeString:i,callbackfunc:n,handlerFunc:c,useCapture:t};return x.registerOrRemoveHandler(d)},nv=(e,r,t)=>typeof onbeforeunload>"u"?-1:t!==1?-5:tv(2,e,!0,r,28,"beforeunload"),ua=(e,r,t,n,a,i,c)=>{x.focusEvent||(x.focusEvent=Me(256));var d=(p=event)=>{var E=x.getNodeNameForTarget(p.target),S=p.target.id?p.target.id:"",O=x.focusEvent;se(E,O+0,128),se(S,O+128,128),be(n)(a,O,r)&&p.preventDefault()},m={target:we(e),eventTypeString:i,callbackfunc:n,handlerFunc:d,useCapture:t};return x.registerOrRemoveHandler(m)},av=(e,r,t,n,a)=>ua(e,r,t,n,12,"blur"),iv=(e,r,t)=>(e=we(e),e?(e.style.width=r+"px",e.style.height=t+"px",0):-4),ov=(e,r,t,n,a)=>ua(e,r,t,n,13,"focus"),sv=e=>{var r=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement,t=!!r;N[e]=t,N[e+1]=x.fullscreenEnabled();var n=t?r:x.previousFullscreenElement,a=x.getNodeNameForTarget(n),i=(n==null?void 0:n.id)||"";se(a,e+2,128),se(i,e+130,128),v[e+260>>2]=n?n.clientWidth:0,v[e+264>>2]=n?n.clientHeight:0,v[e+268>>2]=screen.width,v[e+272>>2]=screen.height,t&&(x.previousFullscreenElement=r)},ca=(e,r,t,n,a,i,c)=>{x.fullscreenChangeEvent||(x.fullscreenChangeEvent=Me(276));var d=(p=event)=>{var E=x.fullscreenChangeEvent;sv(E),be(n)(a,E,r)&&p.preventDefault()},m={target:e,eventTypeString:i,callbackfunc:n,handlerFunc:d,useCapture:t};return x.registerOrRemoveHandler(m)},lv=(e,r,t,n,a)=>x.fullscreenEnabled()?(e=we(e),e?(ca(e,r,t,n,19,"webkitfullscreenchange"),ca(e,r,t,n,19,"fullscreenchange")):-4):-1,fa=(e,r,t,n,a,i,c)=>{x.gamepadEvent||(x.gamepadEvent=Me(1240));var d=(p=event)=>{var E=x.gamepadEvent;Zn(E,p.gamepad),be(n)(a,E,r)&&p.preventDefault()},m={target:we(e),allowsDeferredCalls:!0,eventTypeString:i,callbackfunc:n,handlerFunc:d,useCapture:t};return x.registerOrRemoveHandler(m)},uv=(e,r,t,n)=>rn()?-1:fa(2,e,r,t,26,"gamepadconnected"),cv=(e,r,t,n)=>rn()?-1:fa(2,e,r,t,27,"gamepaddisconnected"),tn=(e,r,t,n,a,i,c)=>{x.keyEvent||(x.keyEvent=Me(160));var d=p=>{var E=x.keyEvent;he[E>>3]=p.timeStamp;var S=E>>2;v[S+2]=p.location,N[E+12]=p.ctrlKey,N[E+13]=p.shiftKey,N[E+14]=p.altKey,N[E+15]=p.metaKey,N[E+16]=p.repeat,v[S+5]=p.charCode,v[S+6]=p.keyCode,v[S+7]=p.which,se(p.key||"",E+32,32),se(p.code||"",E+64,32),se(p.char||"",E+96,32),se(p.locale||"",E+128,32),be(n)(a,E,r)&&p.preventDefault()},m={target:we(e),eventTypeString:i,callbackfunc:n,handlerFunc:d,useCapture:t};return x.registerOrRemoveHandler(m)},fv=(e,r,t,n,a)=>tn(e,r,t,n,2,"keydown"),dv=(e,r,t,n,a)=>tn(e,r,t,n,1,"keypress"),vv=(e,r,t,n,a)=>tn(e,r,t,n,3,"keyup"),mv=(e,r,t)=>{var n=be(e);jn(n,r,t)},da=(e,r,t)=>{he[e>>3]=r.timeStamp;var n=e>>2;v[n+2]=r.screenX,v[n+3]=r.screenY,v[n+4]=r.clientX,v[n+5]=r.clientY,N[e+24]=r.ctrlKey,N[e+25]=r.shiftKey,N[e+26]=r.altKey,N[e+27]=r.metaKey,_e[n*2+14]=r.button,_e[n*2+15]=r.buttons,v[n+8]=r.movementX,v[n+9]=r.movementY;var a=dt(t);v[n+10]=r.clientX-(a.left|0),v[n+11]=r.clientY-(a.top|0)},Or=(e,r,t,n,a,i,c)=>{x.mouseEvent||(x.mouseEvent=Me(64)),e=we(e);var d=(p=event)=>{da(x.mouseEvent,p,e),be(n)(a,x.mouseEvent,r)&&p.preventDefault()},m={target:e,allowsDeferredCalls:i!="mousemove"&&i!="mouseenter"&&i!="mouseleave",eventTypeString:i,callbackfunc:n,handlerFunc:d,useCapture:t};return x.registerOrRemoveHandler(m)},_v=(e,r,t,n,a)=>Or(e,r,t,n,5,"mousedown"),gv=(e,r,t,n,a)=>Or(e,r,t,n,33,"mouseenter"),hv=(e,r,t,n,a)=>Or(e,r,t,n,34,"mouseleave"),pv=(e,r,t,n,a)=>Or(e,r,t,n,8,"mousemove"),yv=(e,r,t,n,a)=>Or(e,r,t,n,6,"mouseup"),Ev=e=>{var r=document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement||document.msPointerLockElement,t=!!r;N[e]=t;var n=x.getNodeNameForTarget(r),a=(r==null?void 0:r.id)||"";se(n,e+1,128),se(a,e+129,128)},vt=(e,r,t,n,a,i,c)=>{x.pointerlockChangeEvent||(x.pointerlockChangeEvent=Me(257));var d=(p=event)=>{var E=x.pointerlockChangeEvent;Ev(E),be(n)(a,E,r)&&p.preventDefault()},m={target:e,eventTypeString:i,callbackfunc:n,handlerFunc:d,useCapture:t};return x.registerOrRemoveHandler(m)},wv=(e,r,t,n,a)=>!document||!document.body||!document.body.requestPointerLock&&!document.body.mozRequestPointerLock&&!document.body.webkitRequestPointerLock&&!document.body.msRequestPointerLock?-1:(e=we(e),e?(vt(e,r,t,n,20,"mozpointerlockchange"),vt(e,r,t,n,20,"webkitpointerlockchange"),vt(e,r,t,n,20,"mspointerlockchange"),vt(e,r,t,n,20,"pointerlockchange")):-4),bv=(e,r,t,n,a,i,c)=>{x.uiEvent||(x.uiEvent=Me(36)),e=we(e);var d=(p=event)=>{if(p.target==e){var E=document.body;if(E){var S=x.uiEvent;v[S>>2]=0,v[S+4>>2]=E.clientWidth,v[S+8>>2]=E.clientHeight,v[S+12>>2]=innerWidth,v[S+16>>2]=innerHeight,v[S+20>>2]=outerWidth,v[S+24>>2]=outerHeight,v[S+28>>2]=pageXOffset|0,v[S+32>>2]=pageYOffset|0,be(n)(a,S,r)&&p.preventDefault()}}},m={target:e,eventTypeString:i,callbackfunc:n,handlerFunc:d,useCapture:t};return x.registerOrRemoveHandler(m)},kv=(e,r,t,n,a)=>bv(e,r,t,n,10,"resize"),mt=(e,r,t,n,a,i,c)=>{x.touchEvent||(x.touchEvent=Me(1552)),e=we(e);var d=p=>{var E={},S=p.touches;for(let j of S)j.isChanged=j.onTarget=0,E[j.identifier]=j;for(let j of p.changedTouches)j.isChanged=1,E[j.identifier]=j;for(let j of p.targetTouches)E[j.identifier].onTarget=1;var O=x.touchEvent;he[O>>3]=p.timeStamp,N[O+12]=p.ctrlKey,N[O+13]=p.shiftKey,N[O+14]=p.altKey,N[O+15]=p.metaKey;var C=O+16,D=dt(e),W=0;for(let j of Object.values(E)){var K=C>>2;if(v[K+0]=j.identifier,v[K+1]=j.screenX,v[K+2]=j.screenY,v[K+3]=j.clientX,v[K+4]=j.clientY,v[K+5]=j.pageX,v[K+6]=j.pageY,N[C+28]=j.isChanged,N[C+29]=j.onTarget,v[K+8]=j.clientX-(D.left|0),v[K+9]=j.clientY-(D.top|0),C+=48,++W>31)break}v[O+8>>2]=W,be(n)(a,O,r)&&p.preventDefault()},m={target:e,allowsDeferredCalls:i=="touchstart"||i=="touchend",eventTypeString:i,callbackfunc:n,handlerFunc:d,useCapture:t};return x.registerOrRemoveHandler(m)},xv=(e,r,t,n,a)=>mt(e,r,t,n,25,"touchcancel"),Cv=(e,r,t,n,a)=>mt(e,r,t,n,23,"touchend"),Sv=(e,r,t,n,a)=>mt(e,r,t,n,24,"touchmove"),Av=(e,r,t,n,a)=>mt(e,r,t,n,22,"touchstart"),Dv=e=>{var r=["hidden","visible","prerender","unloaded"],t=r.indexOf(document.visibilityState);N[e]=document.hidden,v[e+4>>2]=t},Fv=(e,r,t,n,a,i,c)=>{x.visibilityChangeEvent||(x.visibilityChangeEvent=Me(8));var d=(p=event)=>{var E=x.visibilityChangeEvent;Dv(E),be(n)(a,E,r)&&p.preventDefault()},m={target:e,eventTypeString:i,callbackfunc:n,handlerFunc:d,useCapture:t};return x.registerOrRemoveHandler(m)},Tv=(e,r,t,n)=>Fv(lt[1],e,r,t,21,"visibilitychange"),Lv=(e,r,t,n,a,i,c)=>{x.wheelEvent||(x.wheelEvent=Me(96));var d=(p=event)=>{var E=x.wheelEvent;da(E,p,e),he[E+64>>3]=p.deltaX,he[E+72>>3]=p.deltaY,he[E+80>>3]=p.deltaZ,v[E+88>>2]=p.deltaMode,be(n)(a,E,r)&&p.preventDefault()},m={target:e,allowsDeferredCalls:!0,eventTypeString:i,callbackfunc:n,handlerFunc:d,useCapture:t};return x.registerOrRemoveHandler(m)},Pv=(e,r,t,n,a)=>(e=we(e),e?typeof e.onwheel<"u"?Lv(e,r,t,n,9,"wheel"):-1:-4),Rv=e=>document.title=xe(e),Bv=()=>{throw"Please compile your program with async support in order to use asynchronous operations like emscripten_sleep"},nn={},Mv=()=>w||"./this.program",Ir=()=>{if(!Ir.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:Mv()};for(var t in nn)nn[t]===void 0?delete r[t]:r[t]=nn[t];var n=[];for(var t in r)n.push(`${t}=${r[t]}`);Ir.strings=n}return Ir.strings},Ov=(e,r)=>{for(var t=0;t<e.length;++t)N[r++]=e.charCodeAt(t);N[r]=0},Iv=(e,r)=>{var t=0;return Ir().forEach((n,a)=>{var i=r+t;Z[e+a*4>>2]=i,Ov(n,i),t+=n.length+1}),0},Gv=(e,r)=>{var t=Ir();Z[e>>2]=t.length;var n=0;return t.forEach(a=>n+=a.length+1),Z[r>>2]=n,0};function Nv(e){try{var r=oe.getStreamFromFD(e);return s.close(r),0}catch(t){if(typeof s>"u"||t.name!=="ErrnoError")throw t;return t.errno}}var Uv=(e,r,t,n)=>{for(var a=0,i=0;i<t;i++){var c=Z[r>>2],d=Z[r+4>>2];r+=8;var m=s.read(e,N,c,d,n);if(m<0)return-1;if(a+=m,m<d)break}return a};function zv(e,r,t,n){try{var a=oe.getStreamFromFD(e),i=Uv(a,r,t);return Z[n>>2]=i,0}catch(c){if(typeof s>"u"||c.name!=="ErrnoError")throw c;return c.errno}}function qv(e,r,t,n){r=On(r);try{if(isNaN(r))return 61;var a=oe.getStreamFromFD(e);return s.llseek(a,r,t),Fe[n>>3]=BigInt(a.position),a.getdents&&r===0&&t===0&&(a.getdents=null),0}catch(i){if(typeof s>"u"||i.name!=="ErrnoError")throw i;return i.errno}}var Hv=(e,r,t,n)=>{for(var a=0,i=0;i<t;i++){var c=Z[r>>2],d=Z[r+4>>2];r+=8;var m=s.write(e,N,c,d,n);if(m<0)return-1;if(a+=m,m<d)break}return a};function jv(e,r,t,n){try{var a=oe.getStreamFromFD(e),i=Hv(a,r,t);return Z[n>>2]=i,0}catch(c){if(typeof s>"u"||c.name!=="ErrnoError")throw c;return c.errno}}var Xv=(e,r,t)=>e.addEventListener(r,t,{once:!0}),Wv=(e,r)=>{r||(r=[document,document.getElementById("canvas")]),["keydown","mousedown","touchstart"].forEach(t=>{r.forEach(n=>{n&&Xv(n,t,()=>{e.state==="suspended"&&e.resume()})})})},_t=(e,r,t=[])=>{var n=be(r)(...t);return n},va=e=>{var r=u["_"+e];return r},Vv=(e,r)=>{N.set(e,r)},ma=(e,r,t,n,a)=>{var i={string:D=>{var W=0;return D!=null&&D!==0&&(W=ct(D)),W},array:D=>{var W=ut(D.length);return Vv(D,W),W}};function c(D){return r==="string"?xe(D):r==="boolean"?!!D:D}var d=va(e),m=[],p=0;if(n)for(var E=0;E<n.length;E++){var S=i[t[E]];S?(p===0&&(p=Ut()),m[E]=S(n[E])):m[E]=n[E]}var O=d(...m);function C(D){return p!==0&&Nt(p),c(D)}return O=C(O),O},Yv=(e,r,t,n)=>{var a=!t||t.every(c=>c==="number"||c==="boolean"),i=r!=="string";return i&&a&&!n?va(e):(...c)=>ma(e,r,t,c)},Qv=s.createPath,Kv=e=>s.unlink(e),$v=s.createLazyFile,Zv=s.createDevice;s.createPreloadedFile=Mn,s.staticInit(),u.FS_createPath=s.createPath,u.FS_createDataFile=s.createDataFile,u.FS_createPreloadedFile=s.createPreloadedFile,u.FS_unlink=s.unlink,u.FS_createLazyFile=s.createLazyFile,u.FS_createDevice=s.createDevice,H.doesNotExistError=new s.ErrnoError(44),H.doesNotExistError.stack="<generic error, no stack>",u.requestFullscreen=R.requestFullscreen,u.setCanvasSize=R.setCanvasSize,u.getUserMedia=R.getUserMedia,u.createContext=R.createContext,u.requestAnimationFrame=B.requestAnimationFrame,u.pauseMainLoop=B.pause,u.resumeMainLoop=B.resume,B.init();for(var Te=0;Te<32;++Te)Jn.push(new Array(Te));for(var Jv=new Float32Array(288),Te=0;Te<=288;++Te)ar[Te]=Jv.subarray(0,Te);for(var em=new Int32Array(288),Te=0;Te<=288;++Te)Mr[Te]=em.subarray(0,Te);var rm={a:yi,K:Ci,Za:Si,$a:Ai,Wa:Di,Xa:Fi,bb:Ti,Ya:Li,cb:Pi,Qa:Ni,Ra:Ui,vb:Hi,lc:ji,Ja:Zi,La:Ji,Ka:eo,Ma:ro,wc:to,M:no,Ia:ao,Rb:io,Na:oo,Ha:so,Oa:lo,Ua:uo,ac:co,kb:vo,ab:mo,h:go,b:ho,l:po,Q:yo,L:zi,Aa:xo,Fa:Co,Ea:So,Da:Do,e:Fo,c:To,P:Lo,H:Wt,Dd:Po,Ga:Ro,ga:Mo,fa:Io,wa:No,ea:zo,da:Ho,ca:Xo,ba:Vo,aa:Qo,oa:Zo,$:es,_:ts,Z:as,Y:os,X:ls,W:cs,V:ds,U:ms,T:gs,S:ps,R:Es,Cd:bs,eb:xs,Bd:Ss,Ad:Ds,zd:Ts,yd:Ps,xd:Bs,wd:Os,vd:Gs,ud:Us,td:qs,sd:js,rd:Ws,qd:Ys,ya:Ks,pd:Zs,od:el,nd:tl,na:il,md:sl,ld:ul,kd:fl,jd:vl,id:_l,hd:hl,gd:yl,ja:bl,ka:Cl,fd:Al,ia:Tl,ed:Pl,dd:Bl,va:Ol,cd:Gl,bd:Ul,ad:ql,$c:jl,_c:Wl,Zc:Yl,Xc:Kl,za:Zl,Wc:eu,Vc:tu,ma:iu,Yc:su,Uc:uu,Tc:fu,Sc:vu,Rc:_u,Qc:hu,Pc:yu,Oc:wu,Nc:ku,Mc:Cu,Lc:Au,Jc:Fu,Kc:Lu,qa:Pu,sa:Ru,pa:Mu,ra:Iu,ta:Nu,Ic:zu,Gc:Hu,Fc:Xu,Ec:Vu,Hc:Qu,Dc:Zu,Cc:ec,Bc:tc,yc:ic,Ac:sc,zc:uc,uc:fc,xc:vc,vc:_c,tc:hc,sc:yc,rc:wc,qc:kc,pc:Cc,xa:Ac,oc:Fc,nc:Lc,mc:Rc,la:Oc,kc:Gc,jc:Uc,ic:qc,db:jc,hc:Wc,fb:Yc,ua:Kc,gc:rf,fc:nf,ec:of,dc:lf,cc:cf,bc:df,$b:mf,_b:gf,Zb:pf,Yb:Ef,Xb:bf,Wb:xf,Vb:Sf,Ub:Df,Tb:Tf,Sb:Pf,Qb:Bf,Pb:Of,Ob:Gf,Nb:Uf,Mb:qf,Lb:jf,Kb:Wf,Jb:Yf,Ib:Kf,Hb:Zf,Fb:ed,Eb:td,Db:ad,Cb:od,Bb:ld,Ab:cd,zb:dd,yb:md,xb:gd,wb:pd,ub:Ed,tb:bd,sb:xd,rb:Sd,qb:Dd,pb:Td,ob:Pd,nb:Bd,mb:Od,lb:Gd,jb:Ud,ib:qd,ha:Xd,hb:Vd,gb:Qd,j:Kd,Ba:Zd,G:Jd,Pa:rv,k:rn,m:nv,y:av,d:Qn,g:iv,z:ov,p:lv,O:uv,N:cv,s:fv,q:dv,r:vv,Gb:mv,E:_v,C:gv,B:hv,F:pv,D:yv,t:wv,o:kv,u:xv,w:Cv,v:Sv,x:Av,n:Tv,A:Pv,Ca:Rv,i:Bv,Ta:Iv,Va:Gv,f:Yt,I:Nv,_a:zv,Sa:qv,J:jv},pe=await fr();pe.Fd,u._S9xAutoSaveSRAM=pe.Gd,u._set_frameskip=pe.Hd,u._toggle_display_framerate=pe.Id,u._S9xInitInputDevices=pe.Jd,u._set_transparency=pe.Kd,u._run=pe.Ld;var tm=u._main=pe.Md;u._S9xReportButton=pe.Od;var Me=pe.Pd,nm=pe.Qd,am=pe.Rd,im=pe.Sd;u.addRunDependency=Pr,u.removeRunDependency=pr,u.ccall=ma,u.cwrap=Yv,u.FS_createPreloadedFile=Mn,u.FS_unlink=Kv,u.FS_createPath=Qv,u.FS_createDevice=Zv,u.FS_createDataFile=Bn,u.FS_createLazyFile=$v;function om(e=[]){var r=tm;e.unshift(w);var t=e.length,n=ut((t+1)*4),a=n;e.forEach(c=>{Z[a>>2]=ct(c),a+=4}),Z[a>>2]=0;try{var i=r(t,n);return Nn(i,!0),i}catch(c){return Vt(c)}}function an(e=L){if(Qe>0){cr=an;return}if(et(),Qe>0){cr=an;return}function r(){var n;if(u.calledRun=!0,!Q){rt(),tt(),_(u),(n=u.onRuntimeInitialized)==null||n.call(u);var t=u.noInitialRun;t||om(e),Ot()}}u.setStatus?(u.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>u.setStatus(""),1),r()},1)):r()}if(u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);u.preInit.length>0;)u.preInit.pop()();return an(),f=b,f}})(),L_=Ye("<ul></ul>"),P_=Ye('<dt class="svelte-6pc5pn"><!></dt> <dd class="svelte-6pc5pn"><kbd> </kbd></dd>',1),R_=Ye('<dl id="keyboardControlsList" class="svelte-6pc5pn"></dl>'),B_=Ye('<canvas width="256" height="224" class="svelte-6pc5pn"></canvas>'),M_=(o,l)=>ne(l,!0),O_=Ye('<button id="mobileNavHandle" class="svelte-6pc5pn">DEMOS <svg width="10" height="5" viewBox="0 0 2 1"><polygon points="0,0 2,0 1,1" fill="white"></polygon></svg></button>'),I_=(o,l)=>ne(l,!1),G_=Ye("<ul></ul>"),N_=Ye('<nav class="mobile svelte-6pc5pn"><button aria-label="Close demo list" id="mobileNavClose" class="svelte-6pc5pn"><svg width="16" height="16" viewBox="0 0 256 256"><rect width="256" height="256" fill="none"></rect><line x1="200" y1="56" x2="56" y2="200" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line><line x1="200" y1="200" x2="56" y2="56" stroke="white" stroke-linecap="round" stroke-linejoin="round" stroke-width="16"></line></svg></button> <!> <footer class="mobile svelte-6pc5pn">Taylor Plewe, 2025 | <a href="https://github.com/taylorplewe/snes-demos" target="_blank">source code</a></footer></nav>'),U_=Ye('<nav class="desktop svelte-6pc5pn"><!></nav> <main class="svelte-6pc5pn"><div id="canvasContainer" class="svelte-6pc5pn"><canvas width="256" height="224" class="svelte-6pc5pn"></canvas> <!> <!></div> <footer class="desktop svelte-6pc5pn">Taylor Plewe, 2025 | <a href="https://github.com/taylorplewe/snes-demos" target="_blank">source code</a></footer></main> <!> <!>',1);function z_(o,l){Cn(l,!0);let f=vr(!1),u,_,g,b=vr(ze([])),I=vr(""),L,w;const F=Object.freeze([{key:"w",btn:'<i class="ph ph-arrow-up"></i>'},{key:"a",btn:'<i class="ph ph-arrow-left"></i>'},{key:"s",btn:'<i class="ph ph-arrow-down"></i>'},{key:"d",btn:'<i class="ph ph-arrow-right"></i>'},{key:"i",btn:"x"},{key:"j",btn:"y"},{key:"k",btn:"b"},{key:"l",btn:"a"},{key:";",btn:"r"},{key:"m",btn:"l"},{key:"enter",btn:"start"},{key:"shift",btn:"select"}]);let k=!1;const A="scrolling";let T,G,z=0,X="";const V=()=>{T.clearRect(0,0,256,224),T.beginPath(),T.arc(32,32,4,z,z+Math.PI*1.5),T.stroke(),T.fillText(`${X}...`,42,32),z+=.1,U(f)&&(G=requestAnimationFrame(V))},Y=M=>{X=M,ne(f,!0),requestAnimationFrame(V)},Q=()=>{ne(f,!1),cancelAnimationFrame(G)},me=M=>{const re=M.getContext("2d");re!==null&&(T=re,T.lineWidth=1,T.fillStyle="white",T.strokeStyle="white",T.textBaseline="middle")},N=()=>U(b).length&&U(b).includes(A)&&k&&ge(A);(async()=>{Y("fetching demo names from GitHub");const re=await(await fetch("https://api.github.com/repos/taylorplewe/snes-demos/contents")).json(),ke=Object.freeze({boiler:!0,".github":!0});ne(b,ze(re.filter(fe=>fe.type==="dir"&&!(fe.name in ke)).map(fe=>fe.name))),U(b).push("tetris"),Q(),N()})();const $=M=>console.log(M),_e=M=>M==="tetris"?"https://raw.githubusercontent.com/taylorplewe/snes-tetris/refs/heads/master/bin/tetris.sfc":`https://raw.githubusercontent.com/taylorplewe/snes-demos/main/${M}/bin/${M}.sfc`,ge=async M=>{ne(gr,!1),ne(I,ze(M)),Y("fetching sfc file from GitHub");const ke=await(await fetch(_e(M))).blob(),fe=new FileReader;fe.onload=Ke=>{if($("file loaded"),fe.result instanceof ArrayBuffer){try{u.FS_createDataFile("/",`${M}.sfc`,new Uint8Array(fe.result),!0,!0)}catch{console.log(`Unable to create file "${M}.sfc"; file may already exist`)}Q(),_(`${M}.sfc`)}},$("loading .sfc file..."),fe.readAsArrayBuffer(ke)},v=async M=>{u=await T_({print:$,canvas:M}),_=u.cwrap("run",null,["string"]),g=u.cwrap("S9xReportButton",null,["number","boolean"]),k=!0,N()},Z=window.matchMedia("(min-width: 1024px)");Hm(()=>{if(Ta.current===void 0||La.current===void 0)return;if(!Z.matches){L.removeAttribute("style");return}if(!w||!L)return;let M=Ta.current;M-=w.clientWidth;const re=Math.min(Math.floor(M/256),Math.floor(La.current/224));L.style.width=`${256*re}px`});const Fe=M=>{v(M)},he="ontouchstart"in document.documentElement;let gr=vr(!1);const $r=M=>{g(119,M&ee.U),g(97,M&ee.L),g(115,M&ee.D),g(100,M&ee.R),g(105,M&ee.X),g(106,M&ee.Y),g(107,M&ee.B),g(108,M&ee.A),g(109,M&ee.LB),g(59,M&ee.RB),g(13,M&ee.START),g(1249,M&ee.SELECT)};var Zr=U_(),hr=ya(Zr),Jr=Ie(hr);{var Mt=M=>{var re=L_();cn(re,21,()=>U(b),un,(ke,fe)=>{const Ke=bt(()=>U(I)===U(fe));Pa(ke,{get isSelected(){return U(Ke)},get text(){return U(fe)},onClick:()=>ge(U(fe))})}),Sa(3,re,()=>Fa,()=>({axis:"x"})),Ue(M,re)};Cr(Jr,M=>{U(b).length&&M(Mt)})}Da(hr,M=>w=M,()=>w);var Lr=Ee(hr,2),et=Ie(Lr),rt=Ie(et);ka(rt,M=>Fe==null?void 0:Fe(M));var tt=Ee(rt,2);{var Ot=M=>{var re=R_();cn(re,21,()=>F,un,(ke,fe)=>{var Ke=P_(),tr=ya(Ke),yr=Ie(tr);m_(yr,()=>U(fe).btn);var Rr=Ee(tr,2),fr=Ie(Rr),Er=Ie(fr);En(()=>_i(Er,U(fe).key)),Ue(ke,Ke)}),Ue(M,re)};Cr(tt,M=>{he||M(Ot)})}var It=Ee(tt,2);{var Gt=M=>{var re=B_();ka(re,ke=>me==null?void 0:me(ke)),Ue(M,re)};Cr(It,M=>{U(f)&&M(Gt)})}Da(et,M=>L=M,()=>L);var nt=Ee(Lr,2);{var Qe=M=>{var re=O_();re.__click=[M_,gr],Ue(M,re)},cr=M=>{var re=N_(),ke=Ie(re);ke.__click=[I_,gr];var fe=Ee(ke,2);{var Ke=tr=>{var yr=G_();cn(yr,21,()=>U(b),un,(Rr,fr)=>{const Er=bt(()=>U(I)===U(fr));Pa(Rr,{get isSelected(){return U(Er)},get text(){return U(fr)},onClick:()=>ge(U(fr))})}),Ue(tr,yr)};Cr(fe,tr=>{U(b).length&&tr(Ke)})}Sa(3,re,()=>Fa,()=>({axis:"y"})),Ue(M,re)};Cr(nt,M=>{U(gr)?M(cr,!1):M(Qe)})}var Pr=Ee(nt,2);{var pr=M=>{F_(M,{updateMobileButtonsDown:$r})};Cr(Pr,M=>{he&&M(pr)})}Ue(o,Zr),Sn()}An(["click"]);s_(z_,{target:document.getElementById("app")});
